# Vue安装
```powershell
npm i @amap/amap-jsapi-loader --save
```

导入

```vue
import AMapLoader from '@amap/amap-jsapi-loader';
```



> 详情 [https://lbs.amap.com/api/javascript-api-v2/guide/abc/amap-vue](https://lbs.amap.com/api/javascript-api-v2/guide/abc/amap-vue)
>





# 地图
## <font style="color:rgb(37, 43, 72);">生命周期</font>
### <font style="color:rgb(37, 43, 72) !important;background-color:rgb(253, 253, 254);">创建地图对象</font>
```html
<div id="container" style="width:500px; height:300px"></div>
```

```javascript
var map = new AMap.Map("container", {
  zoom: 10, //地图级别
  center: [116.397428, 39.90923], //地图中心点
  layers: [new AMap.TileLayer.Satellite()], //设置图层,可设置成包含一个或多个图层的数组
  mapStyle: "amap://styles/whitesmoke", //设置地图的显示样式
  viewMode: "2D", //设置地图模式
});
```

> 配置详情参数：[https://lbs.amap.com/api/javascript-api-v2/documentation#map](https://lbs.amap.com/api/javascript-api-v2/documentation#map)
>

### <font style="color:rgb(37, 43, 72) !important;">地图加载完成</font>
```javascript
map.on('complete', function(){
  //地图图块加载完成后触发
  //可以在这个事件中执行一些地图的其他操作，
  //例如：添加覆盖物、绑定交互事件。
  //根据需求，自动定位到某个城市或显示某些标记点等。
});
```

### <font style="color:rgb(37, 43, 72) !important;background-color:rgb(253, 253, 254);">地图运行阶段</font>
### <font style="color:rgb(37, 43, 72) !important;">销毁地图对象</font>
```javascript
//解绑地图的点击事件
map.off("click", clickHandler);
//销毁地图，并清空地图容器
map.destroy();	
//地图对象赋值为null
map = null
//清除地图容器的 DOM 元素
document.getElementById("container").remove(); //"container" 为指定 DOM 元素的id
```

## 地图状态
<font style="color:rgb(60, 61, 63);">设置、获取地图中心点和级别 </font>

### <font style="color:rgb(37, 43, 72);">设置地图中心点</font><font style="color:rgb(71, 101, 130) !important;">setCenter()</font>
```javascript
var position = new AMap.LngLat(116.681212,39.852698); //传入经纬度
//var position = [116.681212,39.852698]; //另一种写法
map.setCenter(position); //简写 设置地图中心点
//map.setCenter(position, false, 2000); //另一种写法
```

:::success
也可在 new AMap.Map()中配置

:::

### **<font style="color:rgb(37, 43, 72);background-color:rgb(253, 253, 254);">获取</font>****<font style="color:rgb(37, 43, 72);">地图中心点</font>****<font style="color:rgb(71, 101, 130) !important;">getCenter()</font>**
```javascript
var map = new AMap.Map("container", {
  center: [116.397686, 39.909154], //地图中心点
});
var currentCenter = map.getCenter().toJSON(); //获取地图中心点
console.log(currentCenter); //输出[116.397686, 39.909154]
```

```javascript
var position = new AMap.LngLat(116.681212,39.852698); //传入经纬度
map.setCenter(position); //设置地图中心点
map.on("moveend", function () {
  var currentCenter = map.getCenter().toJSON(); //获取地图中心点
  console.log(currentCenter); //输出[116.681212,39.852698]
});
```

### <font style="color:rgb(37, 43, 72);">设置地图缩放级别</font><font style="color:rgb(71, 101, 130) !important;">setZoom()</font>
```javascript
//设置地图缩放级别，级别为数字。
map.setZoom(13); //参数 zoom 可设范围：[2 , 20]；
//map.setZoom(13, false, 2000); //另一种写法
```

:::success
也可在 new AMap.Map()中配置

:::

### **<font style="color:rgb(37, 43, 72);background-color:rgb(253, 253, 254);">获取地图缩放级</font>****<font style="color:rgb(37, 43, 72);">别</font>****<font style="color:rgb(71, 101, 130) !important;">getZoom()</font>**
```javascript
var map = new AMap.Map("container", {
  zoom: 11, //地图级别
});
var currentZoom = map.getZoom(); //获取地图级别
console.log(currentZoom); //输出11
```

:::success
<font style="color:rgb(37, 43, 72);">getCenter()，</font><font style="color:rgb(71, 101, 130) !important;">getZoom() </font><font style="color:rgb(37, 43, 72);">为了解决这个问题，可以通过监听地图的moveend事件来获取地图中心点数据</font>

:::

### **<font style="color:rgb(37, 43, 72);">同时设置地图中心点和缩放级别</font>****<font style="color:rgb(71, 101, 130) !important;">setZoomAndCenter()</font>**
```javascript
//同时传入缩放级别和中心点经纬度
map.setZoomAndCenter(14, [116.205467, 39.907761]); 
//map.setZoomAndCenter(14, [116.205467, 39.907761], false, 2000); //另一种写法
```



### <font style="color:rgb(60, 61, 63);">根据覆盖物范围调整视野</font>
```javascript
//自动适配到合适视野范围
//无参数，默认包括所有覆盖物的情况
map.setFitView();
//传入覆盖物数组，仅包括 polyline 和 marker1 在地图视野范围，marker2 不在地图视野范围
map.setFitView([polyline, marker1]); //简写
//map.setFitView([polyline, marker1], false, [60, 60, 60, 60], 12); //完整写法
```

## <font style="color:rgb(37, 43, 72);">地图的交互与事件</font>
### <font style="color:rgb(60, 61, 63);">事件绑定及解绑</font>
<font style="color:rgb(37, 39, 42);">直接使用 Map、覆盖物对象的on、off方法</font>

> [https://lbs.amap.com/api/javascript-api-v2/documentation#event](https://lbs.amap.com/api/javascript-api-v2/documentation#event)
>

### <font style="color:rgb(60, 61, 63);">MapsEvent 对象</font>
对于 Map、覆盖物、叠加层对象的鼠标、触屏绑定事件回调时，会返回MapsEvent对象。该对象包含触发的对象目标、触发所在经纬度等信息

> [https://lbs.amap.com/api/javascript-api-v2/documentation#mapsevent](https://lbs.amap.com/api/javascript-api-v2/documentation#mapsevent)
>

### <font style="color:rgb(60, 61, 63);">地图事件</font>
> [https://lbs.amap.com/api/javascript-api-v2/documentation#map](https://lbs.amap.com/api/javascript-api-v2/documentation#map)
>

### <font style="color:rgb(60, 61, 63);">覆盖物事件</font>
> [https://lbs.amap.com/api/javascript-api-v2/documentation#polygon](https://lbs.amap.com/api/javascript-api-v2/documentation#polygon)
>



## <font style="color:rgb(37, 43, 72);">覆盖物/图层管理</font>
### <font style="color:rgb(60, 61, 63);">添加</font><font style="color:rgb(37, 43, 72);">、</font><font style="color:rgb(60, 61, 63);">获取</font><font style="color:rgb(37, 43, 72);">、</font><font style="color:rgb(60, 61, 63);">移除覆盖物</font>
#### <font style="color:rgb(37, 43, 72);">添加覆盖物</font>
<font style="color:rgb(37, 43, 72);">覆盖物有多种类型，包括点标记、矢量图形、信息窗体等，均可以使用</font><font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">add()</font><font style="color:rgb(37, 43, 72);">方法添加。</font>

```javascript
map.add(marker);
//添加多个覆盖物
map.add([marker, circle]); //将点标记和矢量圆同时添加到地图上
```

#### <font style="color:rgb(37, 43, 72);">获取覆盖物</font>
```javascript
//获取所有已经添加的覆盖物
map.getAllOverlays();
//只获取所有已经添加的 marker
map.getAllOverlays('marker');
```

<font style="color:rgb(37, 43, 72);">移除覆盖物</font>

```javascript
//使用 remove 方法移除覆盖物，参数可以为单个覆盖物对象，也可以是一个包括多个覆盖物的数组

//单独移除点标记
map.remove(marker);

//同时移除点标记和矢量圆形
map.remove([marker,circle]);

//使用 clearMap 方法删除所有覆盖物
map.clearMap();
```

### <font style="color:rgb(60, 61, 63);">添加</font><font style="color:rgb(37, 43, 72);">、</font><font style="color:rgb(60, 61, 63);">设置</font><font style="color:rgb(37, 43, 72);">、</font><font style="color:rgb(60, 61, 63);">获取</font><font style="color:rgb(37, 43, 72);">、</font><font style="color:rgb(60, 61, 63);">移除图层</font>
#### <font style="color:rgb(37, 43, 72);">添加图层</font>
```javascript
//构造官方卫星、路网图层
var layer1 = new AMap.TileLayer.Satellite(); //卫星图层
var layer2 = new AMap.TileLayer.RoadNet(); //路网图层
//添加到地图上
map.add(layer1);
map.add(layer2);

//添加多个图层
var layers = [layer1, layer2];
//添加到地图上
map.add(layers);
```

#### <font style="color:rgb(37, 43, 72);">设置图层</font>
```javascript
//构造官方卫星、路网图层
var layers = [new AMap.TileLayer.Satellite(), new AMap.TileLayer.RoadNet()];
//地图上设置图层
map.setLayers(layers);
```

#### <font style="color:rgb(37, 43, 72);">移除图层</font>
```javascript
//移除一个图层
map.remove(layer1);
//移除多个图层
map.remove([layer1, layer2]); //同时移除卫星图层和路网图层
```



### <font style="color:rgb(37, 43, 72);">覆盖物群组</font>
#### <font style="color:rgb(37, 43, 72);">覆盖物群组 OverlayGroup</font>
```javascript
//覆盖物1
var polyline = new AMap.Polyline({
  path: [
    new AMap.LngLat("116.368904", "39.913423"),
    new AMap.LngLat("116.382122", "39.901176"),
  ],
});
//覆盖物2
var circle = new AMap.Circle({
  center: new AMap.LngLat("116.407745", "39.917578"), //圆心
  radius: 50, //半径 单位：米
});

//创建覆盖物群组，传入覆盖物组成的数组
var overlayGroup = new AMap.OverlayGroup([polyline, circle]);
//对此覆盖物群组设置同一属性
overlayGroup.setOptions({
  strokeColor: "red",
  strokeWeight: 5,
});
//统一添加到地图实例上
map.add(overlayGroup);
//同时也可以对群组进行统一的展示隐藏操作
overlayGroup.hide(); //覆盖物隐藏
//overlayGroup.show(); //覆盖物可见
```

```javascript

//overlayGroup已经被加入到地图实例中，后加入到overlayGroup里的覆盖物也会自动被添加到该地图实例中，移除时也相同。
var marker = new AMap.Marker({
  position: new AMap.LngLat("116.387271", "39.912501"),
});
overlayGroup.addOverlay(marker); //添加新的覆盖物到群组
//overlayGroup.removeOverlay(polyline1); //移除群组中的一个覆盖物
```

## <font style="color:rgb(37, 43, 72);">自定义地图</font>
### <font style="color:rgb(37, 43, 72);">自定义样式</font>
```javascript
//初始化地图
var map = new AMap.Map("container", {
  mapStyle: "amap://styles/whitesmoke", //设置地图的显示样式
});
//创建地图后
var map = new AMap.Map("container", {
  zoom: 10, //设置地图的缩放级别
});
map.setMapStyle("amap://styles/whitesmoke");

```

```javascript
mapStyle: 'amap://styles/地图样式ID', //设置地图的显示样式
```

### <font style="color:rgb(60, 61, 63);">设置地图的显示内容</font>
```javascript
map.setFeatures("road");  // 单一种类要素显示
map.setFeatures(['road','point']); // 多个种类要素显示
```

| **<font style="color:rgb(51, 51, 51);background-color:rgb(250, 250, 250);">名称</font>** | **<font style="color:rgb(51, 51, 51);background-color:rgb(250, 250, 250);">说明</font>** |
| :--- | :--- |
| <font style="color:rgb(118, 118, 118);">bg</font> | <font style="color:rgb(118, 118, 118);">区域面</font> |
| <font style="color:rgb(118, 118, 118);">point</font> | <font style="color:rgb(118, 118, 118);">兴趣点</font> |
| <font style="color:rgb(118, 118, 118);">road</font> | <font style="color:rgb(118, 118, 118);">道路及道路标注</font> |
| <font style="color:rgb(118, 118, 118);">building</font> | <font style="color:rgb(118, 118, 118);">建筑物</font> |


## <font style="color:rgb(37, 43, 72);">3D地图</font>
### <font style="color:rgb(37, 43, 72);">开启 3D 地图</font>
```javascript
var map = new AMap.Map('container', {
  pitch: 50, //地图俯仰角度，有效范围 0 度- 83 度
  viewMode: '3D', //地图模式
  rotateEnable: true, //是否开启地图旋转交互 鼠标右键 + 鼠标画圈移动 或 键盘Ctrl + 鼠标左键画圈移动
  pitchEnable: true, //是否开启地图倾斜交互 鼠标右键 + 鼠标上下移动或键盘Ctrl + 鼠标左键上下移动
  zoom: 17, //初始化地图层级
  rotation: -15, //初始地图顺时针旋转的角度
  zooms: [2, 20], //地图显示的缩放级别范围
  center: [116.333926, 39.997245] //初始地图中心经纬度
});
```

### **<font style="color:rgb(60, 61, 63);">开启 3D 地形图</font>**
```javascript
var map = new AMap.Map('container', {
  viewMode: '3D', //地图模式
  terrain: true //开启地形图
});
```

	

# 标记点
## 默认点标记
### 添加Maker实例
```javascript
//创建一个 Marker 实例：
const marker = new AMap.Marker({
  position: new AMap.LngLat(116.39, 39.9), //经纬度对象，也可以是经纬度构成的一维数组[116.39, 39.9]
  title: "北京",
  offset：[0,0],//点标记显示位置偏移量，默认值为[0,0]
});
//将创建的点标记添加到已有的地图实例：
map.add(marker);
```

### 移除Maker实例
```javascript
map.remove(marker)
```

### 添加多个Maker实例
```javascript
//多个点实例组成的数组
const markerList = [marker1, marker2, marker3];
map.add(markerList);
```

### Maker添加点击事件
```javascript
//创建点标记的点击事件
marker.on("click", function (e) {
  alert("你点击了Marker");
});
```

## 自定义点标记
### 自定义图标
```javascript
const marker = new AMap.Marker({
  position: new AMap.LngLat(116.39, 39.9),
  offset: new AMap.Pixel(-10, -10),
  icon: "//vdata.amap.com/icons/b18/1/2.png", //添加 icon 图标 URL
  title: "北京",
});
map.add(marker);
```

### 自定义Icon
```javascript
//创建 AMap.Icon 实例：
const icon = new AMap.Icon({
  size: new AMap.Size(25, 34), //图标尺寸
  image: "//a.amap.com/jsapi_demos/static/demo-center/icons/dir-marker.png", //Icon 的图像
  imageOffset: new AMap.Pixel(-9, -3), //图像相对展示区域的偏移量，适于雪碧图等
  imageSize: new AMap.Size(135, 40), //根据所设置的大小拉伸或压缩图片
});
// 将 Icon 实例添加到 marker 上:
const marker = new AMap.Marker({
  position: new AMap.LngLat(116.35, 39.89), //点标记的位置
  offset: new AMap.Pixel(-13, -30), //偏移量
  icon: icon, //添加 Icon 实例
  title: "北京",
  zooms: [2, 12], //点标记显示的层级范围，超过范围不显示
});
map.add(marker);
```

### 自定义内容
```javascript
const content = `<div class="custom-content-marker">
<img src="//a.amap.com/jsapi_demos/static/demo-center/icons/dir-via-marker.png">
</div>`;
const marker = new AMap.Marker({
  content: content, //自定义点标记覆盖物内容
  position: [116.397428, 39.90923], //基点位置
  offset: new AMap.Pixel(-13, -30), //相对于基点的偏移位置
});
map.add(marker);


<style>
.custom-content-marker {
  width: 25px;
  height: 34px;
}
.custom-content-marker img {
  width: 100%;
  height: 100%;
}
</style>
```

## 文本标记
```javascript
var text = new AMap.Text({
  text: "纯文本标记", //标记显示的文本内容
  anchor: "center", //设置文本标记锚点位置
  draggable: true, //是否可拖拽
  cursor: "pointer", //指定鼠标悬停时的鼠标样式。
  angle: 10, //点标记的旋转角度
  style: {
    //设置文本样式，Object 同 css 样式表
    "padding": ".75rem 1.25rem",
    "margin-bottom": "1rem",
    "border-radius": ".25rem",
    "background-color": "white",
    "width": "15rem",
    "border-width": 0,
    "box-shadow": "0 2px 6px 0 rgba(114, 124, 245, .5)",
    "text-align": "center",
    "font-size": "20px",
    "color": "blue",
  },
  position: [116.396923, 39.918203], //点标记在地图上显示的位置
});
text.setMap(map); //将文本标记设置到地图上
```

 

> Text属性和方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#text](https://lbs.amap.com/api/javascript-api-v2/documentation#text)
>

## <font style="color:rgb(37, 43, 72);">圆形标记</font>
```javascript
//设置圆形位置
var center = new AMap.LngLat(116.433322, 39.900255);
//设置圆的半径大小
var radius = 10 //单位:px

//创建圆形点标记 CircleMarker 实例
var circleMarker = new AMap.CircleMarker({
  center: center, //圆心
  radius: radius, //半径
  strokeColor: "white", //轮廓线颜色
  strokeWeight: 2, //轮廓线宽度
  strokeOpacity: 0.5, //轮廓线透明度
  fillColor: "rgba(0,0,255,1)", //多边形填充颜色
  fillOpacity: 0.5, //多边形填充透明度
  zIndex: 10, //多边形覆盖物的叠加顺序
  cursor: "pointer", //鼠标悬停时的鼠标样式
});

//圆形 circleMarker 对象添加到 Map
map.add(circleMarker);
//将覆盖物调整到合适视野
map.setFitView([circleMarker]);
//删除
map.remove(circleMarker)
```

### 添加点击事件
```javascript
//添加点标记的移入事件
circleMarker.on("mouseover", function () { 
  console.log("鼠标移入");;
});       
```



> [https://lbs.amap.com/api/javascript-api-v2/documentation#circlemarker](https://lbs.amap.com/api/javascript-api-v2/documentation#circlemarker)
>

## <font style="color:rgb(37, 43, 72);">灵活点标记</font>
### 创建样式列表
```javascript
var stylesArray = [
  {
    icon: { //图标样式
      img: "https://a.amap.com/jsapi_demos/static/resource/img/men3.png",
      size: [16, 16], //图标的原始大小
      anchor: "bottom-center", //锚点位置
      fitZoom: 14, //最合适的级别 在此级别显示为图标原始大小
      scaleFactor: 2, //地图放大一级的缩放比例系数 
      maxScale: 2, //图片的最大放大比例，随着地图放大图标会跟着放大，最大为2
      minScale: 1, //图片的最小缩小比例，随着地图缩小图标会跟着缩小，最小为1
    },
    label: { //文本标注
      content: "百花殿", //文本内容
      position: "BM", //文本位置相对于图标的基准点，"BM"为底部中央
      minZoom: 15, //label的最小显示级别，即文本标注在地图15级及以上，才会显示
    },
  },
  {
    icon: {
      img: "https://a.amap.com/jsapi_demos/static/resource/img/tingzi.png",
      size: [48, 63],
      anchor: "bottom-center",
      fitZoom: 17.5,
      scaleFactor: 2,
      maxScale: 2,
      minScale: 0.125,
    },
    label: {
      content: "万寿亭",
      position: "BM",
      minZoom: 15,
    },
  },
];
```

### <font style="color:rgb(37, 43, 72);">创建样式列表的级别映射</font>
```javascript
var zoomStyleMapping = {
  14: 0, //14-17级使用样式 0
  15: 0,
  16: 0,
  17: 0,
  18: 1, //18-20级使用样式 1
  19: 1,
  20: 1,
};
```

### <font style="color:rgb(37, 43, 72);">加载灵活点标记的插件</font>
```javascript
AMap.plugin(["AMap.ElasticMarker"], function () {
  var elasticMarker = new AMap.ElasticMarker({
    position: [116.405562, 39.881166], //点标记位置
    styles: stylesArray, //指定样式列表
    zoomStyleMapping: zoomStyleMapping, //指定 zoom 与样式的映射
  });
  map.add(elasticMarker); //添加到地图上
  map.setFitView(); //缩放地图到合适的视野级别
});
```

## <font style="color:rgb(37, 43, 72);">点标记锚点位置</font>
```javascript
const marker = new AMap.Marker({
  icon: "//a.amap.com/jsapi_demos/static/demo-center/marker/marker-bottom-left.png", //自定义点标记
  position: [116.418481, 39.90833], //基点位置
  offset: new AMap.Pixel(0, 0), //设置点标记偏移量
  anchor: "bottom-left", //设置锚点方位
  offset: new AMap.Pixel(0, 0), //设置点标记偏移量，默认值为 [0,0]
});
map.add(marker);
```

# 海量点
## <font style="color:rgb(37, 43, 72);">海量标注 LabelMarker</font>
### **<font style="color:rgb(37, 43, 72);">创建 LabelsLayer 图层</font>**
```javascript
const labelsLayer = new AMap.LabelsLayer({
  zooms: [3, 20],
  zIndex: 1000,
  collision: true, //该层内标注是否避让
  allowCollision: true, //不同标注层之间是否避让  
});
```

### <font style="color:rgb(37, 43, 72);">设置一个图标对象</font>
```javascript
//设置一个图标对象
const icon = {
  type: "image", //图标类型，现阶段只支持 image 类型
  image: "https://a.amap.com/jsapi_demos/static/demo-center/marker/express2.png", //可访问的图片 URL
  size: [64, 30], //图片尺寸
  anchor: "center", //图片相对 position 的锚点，默认为 bottom-center
};
```

### **<font style="color:rgb(37, 43, 72);">设置文字对象</font>**
```javascript
//设置文字对象
const text = {
  content: "中邮速递易", //要展示的文字内容
  direction: "right", //文字方向，有 icon 时为围绕文字的方向，没有 icon 时，则为相对 position 的位置
  offset: [-20, -5], //在 direction 基础上的偏移量
  //文字样式
  style: {
    fontSize: 12, //字体大小
    fillColor: "#22886f", //字体颜色
    strokeColor: "#fff", //描边颜色
    strokeWidth: 2, //描边宽度
  },
};
```

### **<font style="color:rgb(37, 43, 72);">创建 LabelMarker 标记</font>**
```javascript
//创建 LabelMarker
const labelMarker = new AMap.LabelMarker({
  name: "标注", //此属性非绘制文字内容，仅为标识使用
  position: [116.466994, 39.984904],
  zIndex: 16,
  rank: 1, //避让优先级
  icon: icon, //标注图标，将 icon 对象传给 icon 属性
  text: text, //标注文本，将 text 对象传给 text 属性
});
```

### **<font style="color:rgb(37, 43, 72);">将 LabelMarker 标记添加到 LabelsLayer 图层</font>**
```javascript
//添加一个 labelMarker
labelsLayer.add(labelMarker);

//添加多个
labelsLayer.add([labelMarker1, labelMarker2])

//移除一个
labelsLayer.remove(labelMarker)

//批量移除
labelsLayer.remove([labelMarker1, labelMarker2])

map.add(labelsLayer);
```

### **<font style="color:rgb(37, 43, 72);">为 LabelMarker 添加事件</font>**
```javascript
labelMarker.on('click', function(e){
    labelMarker.setOpacity(0.5);
});
```

> [https://lbs.amap.com/api/javascript-api-v2/documentation#labelslayer](https://lbs.amap.com/api/javascript-api-v2/documentation#labelslayer)
>

## <font style="color:rgb(37, 43, 72);">海量点标记 MassMarks</font>
### <font style="color:rgb(37, 43, 72);">创建海量点对象</font>
```javascript
var style = {
  url: "//vdata.amap.com/icons/b18/1/2.png", //图标地址
  size: new AMap.Size(11, 11), //图标大小
  anchor: new AMap.Pixel(5, 5), //图标显示位置偏移量，基准点为图标左上角
};

//创建样式对象,JS API 2.0支持显示设置 zIndex, zIndex 越大约靠前，默认按顺序排列
var style = [
  {
    url: "https://a.amap.com/jsapi_demos/static/images/mass0.png", //图标地址
    anchor: new AMap.Pixel(6, 6), //图标显示位置偏移量，基准点为图标左上角
    size: new AMap.Size(11, 11), //图标的尺寸
    zIndex: 3, //每种样式图标的叠加顺序，数字越大越靠前
  },
  {
    url: "https://a.amap.com/jsapi_demos/static/images/mass1.png",
    anchor: new AMap.Pixel(4, 4),
    size: new AMap.Size(7, 7),
    zIndex: 2,
  },
  //, …,{}, …
];
```

**<font style="color:rgb(37, 43, 72);">数据集设置</font>**

```javascript
var data = [
  {
    lnglat: [116.397455,39.909187], //经纬度
    name: "天安门",
  },
  {
    lnglat: [116.402394,39.937182],
    name: "南锣鼓巷",
  }, 
  //, …,{}, …
];

var data = [
  {
    lnglat: [116.397455,39.909187], //经纬度
    name: "天安门",
    style: 0, //该数据的取值为样式数组对应的对象索引
  },
  {
    lnglat: [116.402394,39.937182],
    name: "南锣鼓巷",
    style: 1,
  }, 
  //, …,{}, …
];
```

**<font style="color:rgb(37, 43, 72);">创建海量点实例</font>**

```javascript
var massMarks = new AMap.MassMarks(data,{
  zIndex: 5, //海量点图层叠加的顺序
  zooms: [3, 19], //在指定地图缩放级别范围内展示海量点图层
  style: style, //设置样式对象
});

massMarks.setMap(map);
```

> [https://lbs.amap.com/api/javascript-api-v2/documentation#massmarks](https://lbs.amap.com/api/javascript-api-v2/documentation#massmarks)
>

## <font style="color:rgb(37, 43, 72);">点聚合 MarkerCluster</font>
### <font style="color:rgb(37, 43, 72);">按距离聚合</font>
#### <font style="color:rgb(37, 43, 72);">创建聚合点数据</font>
```javascript
var points = [
  { weight: 8, lnglat: ["116.506647", "39.795337"] },
  { weight: 1, lnglat: ["116.843352", "40.377362"] },
  { weight: 1, lnglat: ["116.637122", "40.324272"] },
  { weight: 1, lnglat: ["116.105381", "39.937183"] },
  { weight: 1, lnglat: ["116.653525", "40.128936"] },
];
```

#### <font style="color:rgb(37, 43, 72);">自定义图标样式</font>
##### <font style="color:rgb(37, 43, 72) !important;">完全自定义图标</font>
```javascript
//聚合点样式
var _renderClusterMarker = function (context) {
  //context 为回调参数，
  //包含如下属性 marker:当前聚合点，count:当前聚合点内的点数量
  var clusterCount = context.count; //聚合点内点数量
  context.marker.setContent(
    '<div style="background-color:#00ff00">' + clusterCount + "</div>"
  );
};
//非聚合点样式
var _renderMarker = function (context) {
  //context 为回调参数，
  //包含如下属性 marker:当前非聚合点
  context.marker.setContent('<div style="background-color:#ff0000">1</div>');
};
```

##### <font style="color:rgb(37, 43, 72) !important;">自定义图标</font>
```javascript
var styles = [
  {
    //聚合量在1-10时，聚合点的样式
    url: "//a.amap.com/jsapi_demos/static/images/blue.png", //图标显示图片的地址
    size: new AMap.Size(32, 32), //图标显示图片的大小
    offset: new AMap.Pixel(-16, -16), //图标定位在地图上的位置相对于图标左上角的偏移值
    textColor: "#fff", //文字的颜色
  },
  {
    //聚合量在11-100时，聚合点的样式
    url: "//a.amap.com/jsapi_demos/static/images/green.png",
    size: new AMap.Size(32, 32),
    offset: new AMap.Pixel(-16, -16),
    textColor: "#fff",
  },
  {
    //聚合量在101-1000时，聚合点的样式
    url: "//a.amap.com/jsapi_demos/static/images/orange.png",
    size: new AMap.Size(36, 36),
    offset: new AMap.Pixel(-18, -18),
  },
];
```

#### <font style="color:rgb(37, 43, 72);">添加聚合组件</font>
##### <font style="color:rgb(37, 43, 72) !important;">使用完全自定义图标方式</font>
```javascript
map.plugin(["AMap.MarkerCluster"], function () {
  cluster = new AMap.MarkerCluster(
    map, //地图实例
    points, //海量点数据，数据中需包含经纬度信息字段 lnglat
    {
      gridSize: 60, //数据聚合计算时网格的像素大小
      renderClusterMarker: _renderClusterMarker, //上述步骤的自定义聚合点样式
      renderMarker: _renderMarker, //上述步骤的自定义非聚合点样式
    }
  );
});
```

##### <font style="color:rgb(37, 43, 72) !important;">使用自定义图标方式</font>
```javascript
map.plugin(["AMap.MarkerCluster"], function () {
  cluster = new AMap.MarkerCluster(
    map, //地图实例
    points, //海量点数据，数据中需包含经纬度信息字段 lnglat
    {
      styles: styles,
    }
  );
});
```

> [https://lbs.amap.com/api/javascript-api-v2/documentation#markercluster](https://lbs.amap.com/api/javascript-api-v2/documentation#markercluster)
>

### <font style="color:rgb(37, 43, 72);">按索引聚合</font>
```javascript
var points = [
  {
    lnglat: ["116.506621867519", "39.925077049391"],
    building: "晨光家园",
    district: "朝阳区",
    city: "北京",
  },
  {
    lnglat: ["116.464047215754", "39.871715123709"],
    building: "松榆西里",
    district: "朝阳区",
    city: "北京",
  },
  {
    lnglat: ["116.557773237391", "39.903674644798"],
    building: "北花园街6号院",
    district: "朝阳区",
    city: "北京",
  },
  {
    lnglat: ["116.40499876945", "39.958000356032"],
    building: "安定门外大街80号院",
    district: "东城区",
    city: "北京",
  },
  {
    lnglat: ["116.412789588355", "39.957363077042"],
    building: "地坛北门",
    district: "东城区",
    city: "北京",
  },
];
```

#### <font style="color:rgb(37, 43, 72);">定义点聚合规则</font>
```javascript
var clusterIndexSet = {
  //定义点聚合规则
  city: {
    minZoom: 2,
    maxZoom: 10,
  },
  district: {
    minZoom: 10,
    maxZoom: 12,
  },
  building: {
    minZoom: 12,
    maxZoom: 22,
  },
};
```

#### <font style="color:rgb(37, 43, 72);">自定义图标样式</font>
```javascript
//聚合点样式
var _renderClusterMarker = function (context) {
  //context 为回调参数，
  //包含如下属性 marker:当前聚合点，count:当前聚合点内的点数量
  var clusterCount = context.count; //聚合点内点数量
  context.marker.setContent(
    '<div style="background-color:#00ff00">' + clusterCount + "</div>"
  );
};
```

#### <font style="color:rgb(37, 43, 72);">添加聚合组件</font>
```javascript
map.plugin(["AMap.IndexCluster"], function () {
  indexCluster = new AMap.IndexCluster(map, points, {
    renderClusterMarker: _renderClusterMarker, //自定义聚合点样式
    clusterIndexSet: clusterIndexSet, //聚合规则
  });
});
```

# 线
## <font style="color:rgb(37, 43, 72);">折线 Polyline</font>
### <font style="color:rgb(37, 43, 72);">折线的节点坐标数组</font>
```javascript
//配置折线路径
var path = [
  new AMap.LngLat(116.368904, 39.913423),
  new AMap.LngLat(116.382122, 39.901176),
  new AMap.LngLat(116.387271, 39.912501),
  new AMap.LngLat(116.398258, 39.9046),
];
```

### <font style="color:rgb(37, 43, 72);">创建折线 Polyline 实例</font>
```javascript
//创建 Polyline 实例
var polyline = new AMap.Polyline({
  path: path,
  strokeWeight: 2, //线条宽度
  strokeColor: "red", //线条颜色
  lineJoin: "round", //折线拐点连接处样式
});
```

### <font style="color:rgb(37, 43, 72);">将折线添加至地图实例</font>
```javascript
map.add(polyline);

//移除一条已创建的折线
map.remove(polyline);
//一次性移除多条已创建的折线
var polylines = [polyline1, polyline2, polyline3];
map.remove(polylines);

//显示一条已创建的 polyline
polyline.show();
//隐藏一条已创建的 polyline
polyline.hide();
```

> [https://lbs.amap.com/api/javascript-api-v2/documentation#polyline](https://lbs.amap.com/api/javascript-api-v2/documentation#polyline)
>

## <font style="color:rgb(37, 43, 72);">绘制贝塞尔曲线</font>
### <font style="color:rgb(37, 43, 72);">创建路径</font>
```javascript
//贝塞尔曲线经过的起点，途经点，控制点的二维数组
var startPoint = [[116.37, 39.91]]; //起点
var viaPoint1 = [ //一次贝塞尔曲线
  [116.380298, 39.907771], //控制点
  [116.38, 39.90] //途径点
]; 
var viaPoint2 = [ //二次贝塞尔曲线
  [116.392872, 39.887391], //控制点1
  [116.40772, 39.909252], //控制点2
  [116.41, 39.89] //途径点
]; 
var endPoint = [ //一次贝塞尔曲线
  [116.423857, 39.889498], //控制点
  [116.422312, 39.899639] //途径点
];
//曲线路径配置
var path = [
  startPoint,
  viaPoint1,
  viaPoint2,
  endPoint
]; 	
```

### <font style="color:rgb(37, 43, 72);">创建</font><font style="color:rgb(60, 61, 63);">贝塞尔曲线</font><font style="color:rgb(37, 43, 72);">实例</font>
```javascript
var bezierCurve = new AMap.BezierCurve({
  path: path, //曲线路径
  strokeWeight: 5, //线条宽度
  strokeColor: "#fff", //线条颜色
  isOutline: true, //是否描边
  outlineColor: "red", //描边颜色
  borderWeight: 3, //描边宽度
});

map.add(bezierCurve);
```

> [https://lbs.amap.com/api/javascript-api-v2/documentation#beziercurve](https://lbs.amap.com/api/javascript-api-v2/documentation#beziercurve)
>



## <font style="color:rgb(37, 43, 72);">折线编辑插件 PolyEditor</font>
### **<font style="color:rgb(37, 43, 72);">创建折线 </font>**<font style="color:rgb(37, 43, 72);">Polyline </font>**<font style="color:rgb(37, 43, 72);">实例并添加到 Map</font>**
```javascript
const map = new AMap.Map("container", {
  zoom: 12, //地图级别
  center: [116.397428, 39.90923], //地图中心点
  mapStyle: "amap://styles/whitesmoke", //设置地图的显示样式
  viewMode: "2D", //设置地图模式
});
//折线的节点坐标数组，每个元素为 AMap.LngLat 对象
var path = [
  new AMap.LngLat(116.368904, 39.913423),
  new AMap.LngLat(116.382122, 39.901176),
  new AMap.LngLat(116.387271, 39.912501),
  new AMap.LngLat(116.398258, 39.9046),
];
var polyline = new AMap.Polyline({
  path: path,
  borderWeight: 2, //线条宽度，默认为1
  strokeColor: "red", //线条颜色
  lineJoin: "round", //折线拐点连接处样式
});
//折线 polyline 对象添加到 Map
map.add(polyline);
```

### <font style="color:rgb(37, 43, 72);">构造折线编辑对象，并开启折线的编辑状态</font>


```javascript
//引入折线编辑器插件
map.plugin(["AMap.PolylineEditor"], function () {
  //实例化折线编辑器，传入地图实例和要进行编辑的折线实例
  polylineEditor = new AMap.PolylineEditor(map, polyline);
  //开启编辑模式
  polylineEditor.open();
  //结束编辑
  polylineEditor.close()
});
```

## <font style="color:rgb(37, 43, 72);">贝塞尔曲线编辑插件 BezierCurveEditor</font>
### <font style="color:rgb(37, 43, 72);">创建</font><font style="color:rgb(60, 61, 63);">贝</font>**<font style="color:rgb(37, 43, 72);">塞尔曲线 BezierCurve 实例并添加到 Map</font>**
```javascript
//创建地图
const map = new AMap.Map("container", {
  zoom: 12, //地图级别
  center: [116.397428, 39.90923], //地图中心点
  mapStyle: "amap://styles/whitesmoke", //设置地图的显示样式
  viewMode: "2D", //设置地图模式
});
//创建路径
var path = [
  //每个弧线段有两种描述方式
  [116.37, 39.91], //起点
  //第一段弧线,弧线段有两种描述，方式1
  [116.380298, 39.907771, 116.38, 39.9], //控制点，途经点
  //第二段弧线
  [116.385298, 39.907771, 116.4, 39.9], //控制点，途经点 
  //第三段弧线,弧线段有两种描述，方式2
  [   
    [116.392872, 39.887391], //控制点
    [116.40772, 39.909252], //控制点
    [116.41, 39.89], //途经点
  ],
  //第四段弧线
  [116.423857, 39.889498, 116.422312, 39.899639, 116.425273, 39.902273],
  //控制点，控制点，途经点，每段最多两个控制点
];
//创建贝塞尔曲线实例
var bezierCurve = new AMap.BezierCurve({
  path: path,
  isOutline: true,
  outlineColor: "#ffeeff",
  borderWeight: 3,
  strokeColor: "#3366FF",
  strokeOpacity: 1,
  strokeWeight: 6,
  strokeStyle: "solid", //实线，线样式还支持'dashed'虚线
  //strokeDasharray: [20, 10], //虚线间隙的样式 strokeStyle 是 dashed 时有效, 20代表线段长度 10代表间隙长度
  lineJoin: "round",
  lineCap: "round",
  zIndex: 50,
});
//将贝塞尔曲线添加至地图实例
map.add(bezierCurve);
```

### <font style="color:rgb(37, 43, 72);">构造贝塞尔曲线编辑对象，并绑定事件</font>
```javascript
//引入贝塞尔曲线编辑器插件
map.plugin(["AMap.BezierCurveEditor"], function () {
  //实例化贝塞尔曲线编辑器，传入地图实例和要进行编辑的多边形实例
  var bezierCurveEditor = new AMap.BezierCurveEditor(map, bezierCurve);
  //开启编辑模式
  bezierCurveEditor.open();
  //关闭编辑模式
  bezierCurveEditor.close()
  //绑定 adjust 事件，调整曲线上某个点时触发此事件
  bezierCurveEditor.on("adjust", function (event) {
    console.log("触发事件：adjust");
  });
});
```

# 面
## <font style="color:rgb(37, 43, 72);">多边形绘制和编辑</font>
### 多边形的绘制
#### <font style="color:rgb(37, 43, 72);">设置多边形轮廓线的节点坐标数组</font>
```javascript
//多边形轮廓线的节点坐标数组
var path = [
  new AMap.LngLat(116.368904, 39.913423),
  new AMap.LngLat(116.387271, 39.912501),
  new AMap.LngLat(116.398258, 39.9046),
];
//第一个数组为主要多边形图形
//第二个以及之后为图形内的洞
path = [[lnglat, lnglat ...], [ lnglat, lnglat ...]]
```

#### <font style="color:rgb(37, 43, 72);">创建多边形 Polygon 实例 并添加到map实例</font>
```javascript
//创建多边形 Polygon 实例
var polygon = new AMap.Polygon({
  path: path, //路径
  fillColor: "#fff", //多边形填充颜色
  strokeWeight: 2, //线条宽度，默认为 2
  strokeColor: "red", //线条颜色
});

//多边形 Polygon对象添加到 Map
map.add(polygon);
//将覆盖物调整到合适视野
map.setFitView([polygon])
```

> 配置 [https://lbs.amap.com/api/javascript-api-v2/documentation#polygon](https://lbs.amap.com/api/javascript-api-v2/documentation#polygon)
>

#### <font style="color:rgb(37, 43, 72);">给 Polygon 添加事件</font>
```javascript
//鼠标移入事件
polygon.on("mouseover", () => {
  polygon.setOptions({
    //修改多边形属性的方法
    fillOpacity: 0.7, //多边形填充透明度
    fillColor: "#7bccc4",
  });
});
//鼠标移出事件
polygon.on("mouseout", () => {
  polygon.setOptions({
    fillOpacity: 1,
    fillColor: "#fff",
  });
});
```

### <font style="color:rgb(37, 43, 72);">多边形编辑</font>
#### <font style="color:rgb(37, 43, 72);">构造多边形编辑对象，并开启多边形的编辑状态</font>
```javascript
//引入多边形编辑器插件
map.plugin(["AMap.PolygonEditor"], function () {
  //实例化多边形编辑器，传入地图实例和要进行编辑的多边形实例
  var polygonEditor = new AMap.PolygonEditor(map, polygon);
  //开启编辑模式
  polygonEditor.open();
});
```

> [https://lbs.amap.com/api/javascript-api-v2/documentation#polygoneditor](https://lbs.amap.com/api/javascript-api-v2/documentation#polygoneditor)
>

## <font style="color:rgb(37, 43, 72);">圆形绘制和编辑</font>
### 绘制
#### <font style="color:rgb(37, 43, 72);">创建圆形 Circle 实例</font>
```javascript
//设置圆形位置
var center = new AMap.LngLat(116.433322, 39.900255);
//设置圆的半径大小
var radius = 1000;

//创建圆形 Circle 实例
var circle = new AMap.Circle({
  center: center, //圆心
  radius: radius, //半径
  borderWeight: 3, //描边的宽度
  strokeColor: "#FF33FF", //轮廓线颜色
  strokeOpacity: 1, //轮廓线透明度
  strokeWeight: 6, //轮廓线宽度
  fillOpacity: 0.4, //圆形填充透明度
  strokeStyle: "dashed", //轮廓线样式
  strokeDasharray: [10, 10],
  fillColor: "#1791fc", //圆形填充颜色
  zIndex: 50, //圆形的叠加顺序
});
```

#### <font style="color:rgb(37, 43, 72);">圆形 Circle 对象添加到 Map</font>
```javascript
//圆形 Circle 对象添加到 Map
map.add(circle);
//根据覆盖物范围调整视野
map.setFitView([ circle ])
map.remove(circle)
```

#### <font style="color:rgb(37, 43, 72);">给 Circle 添加事件</font>
```javascript
//鼠标移入事件
circle.on("mouseover", function () { 
  console.log("鼠标移入");
});       
```

### <font style="color:rgb(37, 43, 72);">圆形编辑</font>
```javascript
//引入圆形编辑器插件
map.plugin(["AMap.CircleEditor"], function () {
  //实例化圆形编辑器，传入地图实例和要进行编辑的圆形实例
  var circleEditor = new AMap.CircleEditor(map, circle);
  //开启编辑模式
  circleEditor.open();
});
```

> [https://lbs.amap.com/api/javascript-api-v2/documentation#circleeditor](https://lbs.amap.com/api/javascript-api-v2/documentation#circleeditor)
>

## <font style="color:rgb(37, 43, 72);">矩形绘制和编辑</font>
### 绘制
#### <font style="color:rgb(37, 43, 72);">创建矩形 Rectangle 实例</font>
```javascript
//设置矩形范围，由西南和东北的经纬度坐标组成的范围
var southWest = new AMap.LngLat(116.356449, 39.859008); //西南角的经纬度坐标
var northEast = new AMap.LngLat(116.417901, 39.893797); //东北角的经纬度坐标
var bounds = new AMap.Bounds(southWest, northEast); //创建一个地物对象的经纬度矩形范围

//创建矩形 Rectangle 实例
var rectangle = new AMap.Rectangle({
  bounds: bounds, //矩形的范围
  strokeColor: "red", //轮廓线颜色
  strokeWeight: 6, //轮廓线宽度
  strokeOpacity: 0.5, //轮廓线透明度
  strokeStyle: "dashed", //轮廓线样式，dashed 虚线，还支持 solid 实线
  strokeDasharray: [30, 10], //勾勒形状轮廓的虚线和间隙的样式，30代表线段长度 10代表间隙长度
  fillColor: "blue", //矩形填充颜色
  fillOpacity: 0.5, //矩形填充透明度
  cursor: "pointer", //指定鼠标悬停时的鼠标样式
  zIndex: 50, //矩形在地图上的层级
});


//矩形 Rectangle 对象添加到 Map
map.add(rectangle);
//根据覆盖物范围调整视野
map.setFitView([rectangle]);
```

> 配置详情 [https://lbs.amap.com/api/javascript-api-v2/documentation#rectangle](https://lbs.amap.com/api/javascript-api-v2/documentation#rectangle)
>

#### <font style="color:rgb(37, 43, 72);">给 Rectangle 添加事件</font>
```javascript
//鼠标移入事件  
rectangle.on("mouseover", () => { 
  rectangle.setOptions({ //修改矩形属性的方法
    fillOpacity: 0.7,
    fillColor: "#7bccc4",
  });
});
//鼠标移出事件  
rectangle.on("mouseout", () => { 
  rectangle.setOptions({
    fillOpacity: 0.5,
    fillColor: "blue",
  });
});
```

> 编辑器属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#circleeditor](https://lbs.amap.com/api/javascript-api-v2/documentation#circleeditor)
>

### <font style="color:rgb(37, 43, 72);">矩形编辑</font>
#### <font style="color:rgb(37, 43, 72);">构造矩形编辑对象，并开启矩形的编辑状态</font>
```javascript
//引入矩形编辑器插件
map.plugin(["AMap.RectangleEditor"], function () {
  //实例化矩形编辑器，传入地图实例和要进行编辑的矩形实例
  var rectangleEditor = new AMap.RectangleEditor(map, rectangle);
  //开启编辑模式
  rectangleEditor.open();
  //关闭编辑模式
  rectangleEditor.close()
});
```

> 编辑器属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#rectangleeditor](https://lbs.amap.com/api/javascript-api-v2/documentation#rectangleeditor)
>

## <font style="color:rgb(37, 43, 72);">椭圆形绘制和编辑</font>
### <font style="color:rgb(37, 43, 72);">绘制椭圆形 Ellipse</font>
#### <font style="color:rgb(37, 43, 72);">创建椭圆形 Ellipse 实例</font>
```javascript
var center = new AMap.LngLat(116.433322, 39.900255); //设置椭圆圆心位置
var radius = [2000, 1000]; //设置椭圆的半径大小，单位：米，2000代表横轴半径，1000代表纵轴半径

//椭圆形 Ellipse 实例
var ellipse = new AMap.Ellipse({
  center: center, //椭圆圆心位置
  radius: radius, //椭圆的半径大小
  strokeColor: "#FF33FF", //轮廓线颜色
  strokeWeight: 6, //轮廓线宽度
  strokeOpacity: 0.2, //轮廓线透明度
  fillOpacity: 0.4, //椭圆形填充透明度
  strokeStyle: "dashed", //轮廓线样式，dashed 虚线，还支持 solid，实线
  strokeDasharray: [20, 10], //勾勒形状轮廓的虚线和间隙的样式，20代表线段长度 10代表间隙长度
  fillColor: "#1791fc", //椭圆形填充颜色
  zIndex: 50, //椭圆形在地图上的层级
});

//椭圆形 Ellipse 对象添加到 Map
map.add(ellipse);
//缩放地图到合适的视野级别
map.setFitView([ellipse])
```

> 配置 [https://lbs.amap.com/api/jsapi-v2/documentation#ellipse](https://lbs.amap.com/api/jsapi-v2/documentation#ellipse)
>

#### <font style="color:rgb(37, 43, 72);">给 Ellipse 添加事件</font>
```javascript
//鼠标移入事件
ellipse.on("mouseover", () => { 
  ellipse.setOptions({ //修改椭圆形属性的方法
    fillOpacity: 0.7,
    fillColor: "#7bccc4",
  });
});
//鼠标移出事件
ellipse.on("mouseout", () => { 
  ellipse.setOptions({
    fillOpacity: 0.4,
    fillColor: "#1791fc",
  });
});
```

### <font style="color:rgb(37, 43, 72);">椭圆形编辑</font>
```javascript
//引入椭圆形编辑器插件
map.plugin(["AMap.EllipseEditor"], function () {
  //实例化椭圆形编辑器，传入地图实例和要进行编辑的椭圆形实例
  var ellipseEditor = new AMap.EllipseEditor(map, ellipse);
  //开启编辑模式
  ellipseEditor.open();
  //关闭编辑模式
  ellipseEditor.close();
});
```

> 编辑器属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#ellipseeditor](https://lbs.amap.com/api/javascript-api-v2/documentation#ellipseeditor)
>



# <font style="color:rgb(37, 43, 72);">控件和弹窗</font>
## <font style="color:rgb(60, 61, 63);">信息窗体 InfoWindow</font>
### <font style="color:rgb(37, 43, 72);">默认信息窗体的创建</font>
```javascript
//信息窗体的内容
var content = [
  "<div><b>高德软件有限公司</b>",
  "电话 : 010-84107000   邮编 : 100102",
  "地址 : 北京市望京阜通东大街方恒国际中心A座16层</div>",
];

//创建 infoWindow 实例
var infoWindow = new AMap.InfoWindow({
  content: content.join("<br>"), //传入字符串拼接的 DOM 元素
  anchor: "top-left",
});

//打开信息窗体
infoWindow.open(map, map.getCenter()); 
//map 为当前地图的实例，map.getCenter() 用于获取地图中心点坐标。
```

> 窗体属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#infowindow](https://lbs.amap.com/api/jsapi-v2/documentation#infowindow)
>

### <font style="color:rgb(37, 43, 72);">信息窗体锚点的设置（anchor）</font>
```javascript
var infoWindow = new AMap.InfoWindow({
  anchor: "top-left",
  content: "这是信息窗体！",
});

infoWindow.open(map, [116.401337, 39.907886]);
```

### <font style="color:rgb(37, 43, 72);">自定义信息窗体</font>
```javascript
//实例化信息窗体
var content = [
  "<div class='info'>这是一个自定义窗体",
  "所以内容和样式你都可以自定义",
  "<img src='https://webapi.amap.com/images/sharp.png'></div>",
];

var infoWindow = new AMap.InfoWindow({
  isCustom: true, //使用自定义窗体
  content: content.join("<br>"),
  offset: new AMap.Pixel(16, -45),
});

infoWindow.open(map, map.getCenter());
//关闭窗口
infoWindow.close()
```

#### <font style="color:rgb(37, 43, 72);">信息窗体的事件</font>
> 事件方法 [https://lbs.amap.com/api/jsapi-v2/documentation#infowindow](https://lbs.amap.com/api/jsapi-v2/documentation#infowindow)
>

## <font style="color:rgb(37, 43, 72);">地图控件</font>
### <font style="color:rgb(37, 43, 72);">同时引入工具条插件、比例尺插件和鹰眼等插件</font>
```javascript
AMap.plugin(
  [
    "AMap.ToolBar",
    "AMap.Scale",
    "AMap.HawkEye",
    "AMap.MapType",
    "AMap.Geolocation",
    "AMap.ControlBar",
  ],
  function () {
    //添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件
    map.addControl(new AMap.ToolBar());

    //添加比例尺控件，展示地图在当前层级和纬度下的比例尺
    map.addControl(new AMap.Scale());

    //添加鹰眼控件，在地图右下角显示地图的缩略图
    map.addControl(new AMap.HawkEye({ isOpen: true }));

    //添加类别切换控件，实现默认图层与卫星图、实施交通图层之间切换的控制
    map.addControl(new AMap.MapType());

    //添加定位控件，用来获取和展示用户主机所在的经纬度位置
    map.addControl(new AMap.Geolocation());

    //添加控制罗盘控件，用来控制地图的旋转和倾斜
    map.addControl(new AMap.ControlBar());
  }
);
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#control](https://lbs.amap.com/api/jsapi-v2/documentation#control)
>

### <font style="color:rgb(37, 43, 72);">UI 组件库实现地图基础控件</font>
<font style="color:rgb(37, 43, 72) !important;">JS API 的 UI 组件库通过 </font><font style="color:rgb(71, 101, 130) !important;">BasicControl</font><font style="color:rgb(37, 43, 72) !important;"> 提供了一些基础地图控件。目前包括：</font>

+ <font style="color:rgb(37, 43, 72) !important;">缩放控件</font><font style="color:rgb(71, 101, 130) !important;">BasicControl.Zoom</font><font style="color:rgb(37, 43, 72) !important;">；</font>
+ <font style="color:rgb(37, 43, 72) !important;">图层切换控件</font><font style="color:rgb(71, 101, 130) !important;">BasicControl.LayerSwitcher</font><font style="color:rgb(37, 43, 72) !important;">；</font>
+ <font style="color:rgb(37, 43, 72) !important;">交通图控件</font><font style="color:rgb(71, 101, 130) !important;">BasicControl.Traffic</font><font style="color:rgb(37, 43, 72) !important;">。</font>

#### <font style="color:rgb(37, 43, 72);">引入 AMapUI</font>
```javascript
<script src="https://webapi.amap.com/loader.js"></script>
<script type="text/javascript">
  AMapLoader.load({
    key: "「你申请的应用Key」", //申请好的 Web 端开发者 Key，首次调用 load 时必填
    version: "2.0", //指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
    //加载 AMapUI
    AMapUI: {
      version: "1.1", // AMapUI 版本
    },
  }).then((AMap) => {
    const map = new AMap.Map("container");
  });
</script>
```

#### <font style="color:rgb(37, 43, 72);">加载 BasicControl 并添加缩放和图层切换控件</font>
```javascript
AMapUI.loadUI(["control/BasicControl"], function (BasicControl) {
  //添加一个缩放控件
  map.addControl(
    new BasicControl.Zoom({
      position: "lt", //left top，左上角
    })
  );

  //缩放控件，显示 Zoom 值
  map.addControl(
    new BasicControl.Zoom({
      position: "lb", //left bottom, 左下角
      showZoomNum: true, //显示zoom值
    })
  );

  //图层切换控件
  map.addControl(
    new BasicControl.LayerSwitcher({
      position: "rt", //right top，右上角
      theme: "my-red", //主题样式 my-red 为 css 的 class 名
    })
  );
});
```

## <font style="color:rgb(37, 43, 72);">右键菜单</font>
### <font style="color:rgb(37, 43, 72);">创建菜单实例</font>
```javascript
var contextMenu = new AMap.ContextMenu();
```

### <font style="color:rgb(37, 43, 72);">添加菜单功能</font>
```javascript
//右键放大
contextMenu.addItem("放大一级", function () {
  map.zoomIn();
}, 0);
//右键缩小
contextMenu.addItem("缩小一级", function () {
  map.zoomOut();
}, 1);
```

### <font style="color:rgb(37, 43, 72);">绑定右键菜单事件</font>
```javascript
//地图绑定鼠标右击事件——弹出右键菜单
map.on('rightclick', function (e) {
  contextMenu.open(map, e.lnglat);
});
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#contextmenu](https://lbs.amap.com/api/jsapi-v2/documentation#contextmenu)
>



# <font style="color:rgb(37, 43, 72);">图层</font>
## <font style="color:rgb(37, 43, 72);">高德官方图层</font>
1. <font style="color:rgb(118, 118, 118);">标准图层 </font>[TileLayer](https://lbs.amap.com/api/jsapi-v2/documentation#tilelayer)
2. <font style="color:rgb(118, 118, 118);">卫星图层 </font>[TileLayer.Satellite](https://lbs.amap.com/api/jsapi-v2/documentation#Satellite)
3. <font style="color:rgb(118, 118, 118);">路网图层 </font>[TileLayer.RoadNet](https://lbs.amap.com/api/jsapi-v2/documentation#RoadNet)
4. <font style="color:rgb(118, 118, 118);">实时交通图层 </font>[TileLayer.Traffic](https://lbs.amap.com/api/jsapi-v2/documentation#Traffic)
5. <font style="color:rgb(118, 118, 118);">楼块图层 </font>[Buildings](https://lbs.amap.com/api/jsapi-v2/documentation#buildings)
6. <font style="color:rgb(118, 118, 118);">室内图层 </font>[IndoorMap](https://lbs.amap.com/api/jsapi-v2/documentation#indoormap)

### <font style="color:rgb(60, 61, 63);">标准图层</font>
```javascript
//创建标准图层
var layer = new AMap.createDefaultLayer({
  zooms: [3, 20], //可见级别
  visible: true, //是否可见
  opacity: 1, //透明度
  zIndex: 0, //叠加层级
});
//将图层添加到地图
var map = new AMap.Map("container", {
  layers: [layer], //地图图层的数组
});
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#TileLayer](https://lbs.amap.com/api/jsapi-v2/documentation#TileLayer)
>

### <font style="color:rgb(60, 61, 63);">卫星与路网图层</font>
<font style="color:rgb(37, 43, 72);">卫</font>星图层与路网图层通常一起使用，这两个图层的创建和使用方法和TileLayer类似，只需要修改类名为对应的类名即可。

```javascript
//创建卫星图层
var satellite = new AMap.TileLayer.Satellite();
//创建路网图层
var roadNet = new AMap.TileLayer.RoadNet();
//将图层添加到地图
var map = new AMap.Map("container", {
  layers: [satellite, roadNet], //地图图层的数组
});
```

> 属性犯法 [https://lbs.amap.com/api/javascript-api-v2/documentation#satellite](https://lbs.amap.com/api/javascript-api-v2/documentation#satellite)
>

### <font style="color:rgb(60, 61, 63);">实时交通图层</font>
```javascript
//初始化地图
var map = new AMap.Map("container", {
  zoom: 10, //地图级别
});

//创建实施交通图层
var traffic = new AMap.TileLayer.Traffic({
  autoRefresh: true, //是否自动刷新
  interval: 180, //刷新间隔，默认180s
});

// 通过 add 方法将图层添加到地图
map.add(traffic);
```

### <font style="color:rgb(60, 61, 63);">楼块图层</font>
```javascript
//创建楼块图层
var buildings = new AMap.Buildings({
  //楼块图层的有效缩放级别范围为[ 17, 20 ] 
  zooms: [17, 20],
  zIndex: 10,
  heightFactor: 2, //2倍于默认高度（3D 视图下生效）
});
//将楼块图层添加到地图
var map = new AMap.Map("container", {
  center: [116.397428, 39.90923], //地图中心点
  viewMode: "3D", //地图模式
  pitch: 60, //俯仰角度
  rotation: -35, //地图顺时针旋转角度
  layers: [buildings], //地图图层的数组
  zoom: 17, //地图级别
  showBuildingBlock: false,
});
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#buildings](https://lbs.amap.com/api/javascript-api-v2/documentation#buildings)
>

### <font style="color:rgb(37, 43, 72);">室内图层</font>
#### <font style="color:rgb(37, 43, 72);">默认室内图层</font>
```javascript
//创建地图，设置室内地图图层可见
var map = new AMap.Map("container", {
  center: [116.519942, 39.924677], //地图中心点
  showIndoorMap: true, //是否自动展示室内地图
  zoom: 18, //地图级别
});
//监听地图 indoor_create 事件，室内地图图层创建回调中可获取室内地图图层实例
map.on("indoor_create", function () {
  map.indoorMap.showIndoorMap("B000A8VT15", 4); //显示指定 POI 的室内地图,第一个参数为建筑物 POIID，第二个参数为楼层
});
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#map](https://lbs.amap.com/api/javascript-api-v2/documentation#map)
>

#### <font style="color:rgb(37, 43, 72);">独立的室内图层</font>
```javascript
//加载室内图层插件
AMap.plugin(["AMap.IndoorMap"], function () {
  var indoorMap = new AMap.IndoorMap({ alwaysShow: true });
  //设定在没有矢量底图的时候也显示，默认情况下室内图仅在有矢量底图的时候显示
  var map = new AMap.Map("container", {
    showIndoorMap: false, //隐藏地图自带的室内地图图层
    layers: [indoorMap, AMap.createDefaultLayer()], //地图图层的数组
  });
  indoorMap.showIndoorMap("B000A856LJ"); //显示指定 POI 的室内地图
});
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#indoormap](https://lbs.amap.com/api/jsapi-v2/documentation#indoormap)
>

## <font style="color:rgb(37, 43, 72);">简易行政区图</font>
1. <font style="color:rgb(37, 43, 72) !important;">世界简易行政区图层 </font>[AMap.DistrictLayer.World](https://lbs.amap.com/api/jsapi-v2/documentation#districtlayer)
2. <font style="color:rgb(37, 43, 72) !important;">国家简易行政区图层 </font>[AMap.DistrictLayer.Country](https://lbs.amap.com/api/jsapi-v2/documentation#districtlayer)
3. <font style="color:rgb(37, 43, 72) !important;">省市简易行政区图层 </font>[AMap.DistrictLayer.Province](https://lbs.amap.com/api/jsapi-v2/documentation#districtlayer)

### <font style="color:rgb(64, 64, 64);">世界简易行政区图层</font>
```javascript
//1、初始化地图
var map = new AMap.Map("container", {
  zoom: 3, //设置地图初始化级别
});

//2、创建世界简易行政区图层
var distWorld = new AMap.DistrictLayer.World({
  zIndex: 10, //设置图层层级
  zooms: [2, 15], //设置图层显示范围
});

//3、设置行政区图层样式
distWorld.setStyles({
  "stroke-width": 2, //描边线宽
  fill: function (data) {
    //设置区域填充颜色，可根据回调信息返回区域信息设置不同填充色
    //回调返回区域信息数据，字段包括 SOC(国家代码)、NAME_ENG(英文名称)、NAME_CHN(中文名称)等
    //国家代码名称说明参考 https://a.amap.com/jsapi_demos/static/demo-center/js/soc-list.json
    return "#ffffffe7";
  },
});

//4、将简易行政区图层添加到地图
map.add(distWorld);
```



### <font style="color:rgb(64, 64, 64);">国家简易行政区图层</font>
```javascript
//1、初始化地图
var map = new AMap.Map("container", {
  zoom: 3, //设置地图初始化级别
});

//2、创建国家简易行政区图层
var distCountry = new AMap.DistrictLayer.Country({
  zIndex: 10, //设置图层层级
  zooms: [2, 15], //设置图层显示范围
  SOC: "CHN", //设置显示国家
  depth: 2, //设置数据显示层级，0：显示国家面，1：显示省级，当国家为中国时设置depth为2的可以显示市一级
});

//3、设置行政区图层样式
distCountry.setStyles({
  "stroke-width": 2, //描边线宽
  fill: function (data) {
    //设置区域填充颜色，可根据回调信息返回区域信息设置不同填充色
    //回调返回区域信息数据，字段包括 SOC(国家代码)、NAME_ENG(英文名称)、NAME_CHN(中文名称)等
    //国家代码名称说明参考 https://a.amap.com/jsapi_demos/static/demo-center/js/soc-list.json
    return "#ffffffe7";
  },
});

//4、将简易行政区图层添加到地图
map.add(distCountry);
```

### <font style="color:rgb(64, 64, 64);">省市简易行政区图层</font>
```javascript
//1、初始化地图
var map = new AMap.Map("container", {
  zoom: 3, //设置地图初始化级别
});

//2、创建省市简易行政区图层
var distProvince = new AMap.DistrictLayer.Province({
  zIndex: 10, //设置图层层级
  zooms: [2, 15], //设置图层显示范围
  adcode: "130000", //设置行政区 adcode
  depth: 2, //设置数据显示层级，0：显示国家面，1：显示省级，当国家为中国时设置depth为2的可以显示市一级
});

// 3、设置行政区图层样式
distProvince.setStyles({
  "stroke-width": 2, //描边线宽
  fill: function (data) {
    //设置区域填充颜色，可根据回调信息返回区域信息设置不同填充色
    //回调返回区域信息数据，字段包括 SOC(国家代码)、NAME_ENG(英文名称)、NAME_CHN(中文名称)等
    //国家代码名称说明参考 https://a.amap.com/jsapi_demos/static/demo-center/js/soc-list.json
    return "#ffffffe7";
  },
});

//4、将简易行政区图层添加到地图
map.add(distProvince);
```

> 属性方法 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#districtlayer](https://lbs.amap.com/api/javascript-api-v2/documentation#districtlayer)
>

## <font style="color:rgb(37, 43, 72);">第三方标准图层</font>
1. <font style="color:rgb(118, 118, 118);">WMS 标准数据图层 </font>[AMap.TileLayer.WMS](https://lbs.amap.com/api/jsapi-v2/documentation#wms)
2. <font style="color:rgb(118, 118, 118);">WMTS 标准数据图层 </font>[Map.TileLayer.WMTS](https://lbs.amap.com/api/jsapi-v2/documentation#wmts)
3. <font style="color:rgb(118, 118, 118);">非高德官方的栅格图片图层 </font>[AMap.TileLayer](https://lbs.amap.com/api/jsapi-v2/documentation#tilelayer)

### <font style="color:rgb(60, 61, 63);">WMS 标准图层</font>
```javascript
//创建地图实例
var map = new AMap.Map("container", {
  zoom: 3,
  center: [-99.241291, 39.51401],
});

//创建 WMS 标准图层
var wms = new AMap.TileLayer.WMS({
  url: "https://ahocevar.com/geoserver/wms", //WMS 服务的 url 地址
  blend: false, //地图级别切换时，不同级别的图片是否进行混合
  tileSize: 512, //加载 WMS 图层服务时，图片的分片大小
  params: {
    LAYERS: "topp:states",
    VERSION: "1.3.0",
  }, //OGC 标准的 WMS 地图服务的 GetMap 接口的参数
});

map.add(wms);
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#wms](https://lbs.amap.com/api/javascript-api-v2/documentation#wms)
>

### <font style="color:rgb(60, 61, 63);">WMTS 标准图层</font>
```javascript
//初始化地图
var map = new AMap.Map('container', {
  zoom: 3,
  center: [-99.241291, 39.51401]
}); 
 
//创建 WMTS 标准图层
var wmts = new AMap.TileLayer.WMTS({
  url: 'https://wmts-service.pre-fc.alibaba-inc.com/amap/service/wmts', //WMTS 服务的 url 地址
  blend: true, //地图级别切换时，不同级别的图片是否进行混合
  tileSize: 256, //加载 WMTS 图层服务时，图片的分片大小
  params: {
    'LAYERS': 'map:shanghai',
    'VERSION': '1.1.0'
  } //OGC 标准的 WMTS 地图服务的 GetMap 接口的参数
});

//将图层添加到地图
map.add(wmts);
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#wmts](https://lbs.amap.com/api/javascript-api-v2/documentation#wmts)
>

### <font style="color:rgb(60, 61, 63);">非高德官方的栅格图片图层</font>
```javascript
//初始化地图
var map = new AMap.Map('container'); 

//创建自定义切片图层，指定 getTileUrl 属性
var googleLayer = new AMap.TileLayer({
   tileUrl: 'https://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&size=1&scl=1&style=8&ltype=11',
   zIndex:2
});

//将自定义图层添加到地图
map.add(googleLayer);
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#tilelayer](https://lbs.amap.com/api/javascript-api-v2/documentation#tilelayer)
>

## <font style="color:rgb(37, 43, 72);">使用自有数据添加图层</font>
1. <font style="color:rgb(118, 118, 118);">图片图层 </font>[AMap.ImageLayer](https://lbs.amap.com/api/jsapi-v2/documentation#imagelayer)
2. <font style="color:rgb(118, 118, 118);">Canvas 图层 </font>[AMap.CanvasLayer](https://lbs.amap.com/api/jsapi-v2/documentation#canvaslayer)
3. <font style="color:rgb(118, 118, 118);">灵活切片图层 </font>[TileLayer.Flexible](https://lbs.amap.com/api/jsapi-v2/documentation#flexible)

### <font style="color:rgb(60, 61, 63);">图片作为自定义图层</font>
```javascript
//初始化地图
var map = new AMap.Map("container", {
  center: [116.33719, 39.942384],
  zoom: 15,
});

//创建图片图层
var imageLayer = new AMap.ImageLayer({
  url: "https://amappc.cn-hangzhou.oss-pub.aliyun-inc.com/lbs/static/img/dongwuyuan.jpg", //图片 Url
  bounds: new AMap.Bounds([116.327911, 39.939229], [116.342659, 39.946275]), //图片范围大小的经纬度，传入西南和东北的经纬度坐标
  zIndex: 2, //图层的层级
  zooms: [15, 20], //设置可见级别，[最小级别，最大级别]
});

//将图层添加至地图实例
map.add(imageLayer);
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#imagelayer](https://lbs.amap.com/api/jsapi-v2/documentation#imagelayer)
>

### <font style="color:rgb(64, 64, 64);">Canvas 作为自定义图层</font>
```javascript
//创建地图
var map = new AMap.Map("container", {
  viewMode: "3D",
  zoom: 15,
  center: [116.335183, 39.941735],
});
//创建并设置 canvas
var canvas = document.createElement("canvas");
canvas.width = canvas.height = 200;
var context = canvas.getContext("2d");
context.fillStyle = "rgb(0,100,255)";
context.strokeStyle = "white";
context.globalAlpha = 1;
context.lineWidth = 2;
var radious = 0;
//调用 canvas 进行绘制
var draw = function () {
  context.clearRect(0, 0, 200, 200);
  context.globalAlpha = (context.globalAlpha - 0.01 + 1) % 1;
  radious = (radious + 1) % 100;
  context.beginPath();
  context.arc(100, 100, radious, 0, 2 * Math.PI);
  context.fill();
  context.stroke();
  AMap.Util.requestAnimFrame(draw);
};
//创建 canvas 图层
var CanvasLayer = new AMap.CanvasLayer({
  canvas: canvas, //Canvas DOM 对象
  bounds: new AMap.Bounds([116.328911, 39.937229], [116.342659, 39.946275]), //图片范围大小的经纬度，传入西南和东北的经纬度坐标
  zooms: [3, 18],
});
//将 canvas 添加到地图
map.addLayer(CanvasLayer);
draw();
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#canvaslayer](https://lbs.amap.com/api/javascript-api-v2/documentation#canvaslayer)
>

### <font style="color:rgb(60, 61, 63);">灵活切片图层 TileLayer.Flexible </font>
```javascript
//创建地图
var map = new AMap.Map("container", {
  zoom: 15,
  center: [116.335183, 39.941735],
});
//创建 Flexible 图层
var flexibleLayer = new AMap.TileLayer.Flexible({
  cacheSize: 30, //缓存瓦片数量
  opacity: 0.3, //透明度
  createTile: function (x, y, z, success, fail) {
    /**
     * 自定义切片属性，返回值为切片图片或 canvas
     * @param x: 切片横向编号
     * @param y: 切片纵向编号
     * @param z: 切片层级
     * @param success: 创建成功回调
     * @param fail: 创建失败回调
     */
    if ((x + y) % 3) {
      fail();
      return;
    }

    var img = document.createElement("img");
    img.onload = function () {
      success(img);
    };
    img.crossOrigin = "anonymous"; //必须添加，同时图片要有跨域头
    img.onerror = function () {
      fail();
    };

    img.src = "https://a.amap.com/jsapi_demos/static/images/amap.png";
  },
});

//将图层添加到地图
map.add(flexibleLayer);
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#flexible](https://lbs.amap.com/api/javascript-api-v2/documentation#flexible)
>

## <font style="color:rgb(37, 43, 72);">自定义图层</font>
### <font style="color:rgb(37, 43, 72);">创建一个自定义图层</font>
```javascript
//创建 canvas
var canvas = document.createElement('canvas');

//将 canvas 宽高设置为地图实例的宽高
canvas.width = map.getSize().width;
canvas.height = map.getSize().height;

//创建一个自定义图层
var customLayer = new AMap.CustomLayer(canvas, {
  zIndex: 12,
  zooms: [3, 18] //设置可见级别，当地图级别在3到18之间时，此图层可见
});

//将自定义图层添加到地图 
map.add(customLayer);
```

### **<font style="color:rgb(37, 43, 72);">自定义渲染方法</font>**
```javascript
//使用 canvas 在地图中心点绘制一个圆形

//render方法在自定义图层初次绘制、地图移动与缩放结束时调用。
customLayer.render = () => {
  //获取地图中心点位置
  var center = map.getCenter(); //获取当前地图中心点经纬度坐标
  var pos = map.lngLatToContainer(center); //将地图经纬度坐标转为地图容器像素坐标
  var r = 20;

  //使用 canvas 绘制圆形
  var ctx = canvas.getContext("2d");
  ctx.fillStyle = "#08f";
  ctx.strokeStyle = "#fff";
  ctx.beginPath();
  ctx.moveTo(pos.x + r, pos.y);
  ctx.arc(pos.x, pos.y, r, 0, 2 * Math.PI);
  ctx.lineWidth = 3;
  ctx.closePath();
  ctx.stroke();
  ctx.fill();
};
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#customlayer](https://lbs.amap.com/api/javascript-api-v2/documentation#customlayer)
>



# <font style="color:rgb(37, 43, 72);">事件系统</font>
## <font style="color:rgb(37, 43, 72);">地图和覆盖物事件</font>
### <font style="color:rgb(60, 61, 63);">事件绑定及解绑</font>
```javascript
var map = new AMap.Map("container");
var clickHandler = function(e) {
  alert('您在[ '+e.lnglat.getLng()+','+e.lnglat.getLat()+' ]的位置点击了地图！');
};

//绑定事件
map.on('click', clickHandler);
//解绑事件
map.off('click', clickHandler);
```

> 参考 [https://lbs.amap.com/api/javascript-api-v2/documentation#event](https://lbs.amap.com/api/javascript-api-v2/documentation#event)
>

### <font style="color:rgb(60, 61, 63);">MapsEvent 对象</font>
```javascript
map.on("click", function (ev) {
  //触发事件的对象
  var target = ev.target;

  //触发事件的地理坐标，AMap.LngLat 类型
  var lnglat = ev.lnglat;

  //触发事件的像素坐标，AMap.Pixel 类型
  var pixel = ev.pixel;

  //触发事件类型
  var type = ev.type;
});
```

> 参考 [https://lbs.amap.com/api/javascript-api-v2/documentation#mapsevent](https://lbs.amap.com/api/javascript-api-v2/documentation#mapsevent)
>

### <font style="color:rgb(60, 61, 63);">地图事件</font>
> 参考 [https://lbs.amap.com/api/javascript-api-v2/documentation#map](https://lbs.amap.com/api/javascript-api-v2/documentation#map)
>

### <font style="color:rgb(60, 61, 63);">覆盖物事件</font>
> 参考 [https://lbs.amap.com/api/javascript-api-v2/documentation#polygon](https://lbs.amap.com/api/javascript-api-v2/documentation#polygon)
>

# <font style="color:rgb(37, 43, 72);">坐标变换</font>
## **<font style="color:rgb(37, 43, 72);">坐标系转换</font>**
### <font style="color:rgb(37, 43, 72);">地图容器坐标与经纬度的互换</font>
#### <font style="color:rgb(37, 43, 72);">容器坐标转经纬度坐标</font><font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">map.containerToLnglat</font>
```javascript
//在 html 的 #container 容器元素中创建地图
var map = new AMap.Map('container', {
  zoom: 4,
});

//容器坐标，原点为左上角
var px = 600;
var py = 300;

//构造成 AMap.Pixel 对象后传入
var pixel = new AMap.Pixel(px, py);

//获得 AMap.LngLat 对象
var lnglat= map.containerToLngLat(pixel);  
//console.log(lnglat.lng, lnglat.lat) //即为 #container 像素坐标对应的地图经纬度坐标

```

#### <font style="color:rgb(37, 43, 72);">经纬度坐标转容器坐标</font><font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">map.lngLatToContainer</font>
```javascript
//在 html 的 #container 容器元素中创建地图
var map = new AMap.Map('container', {
  zoom: 4
});

//要转换的地理经纬度坐标
var longitude = 116.4;
var latitude = 39.9;

//构造成 AMap.LngLat 对象后传入
var lnglat = new AMap.LngLat(longitude, latitude);

// 获得 AMap.Pixel 对象
var pixel = map.lngLatToContainer(lnglat);  
//console.log(pixel.x, pixel.y) //即为经纬度在 #container 上对应的像素坐标

```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#map](https://lbs.amap.com/api/javascript-api-v2/documentation#map)
>

### <font style="color:rgb(37, 43, 72);">经纬度与平面地图像素坐标的互换</font>
#### <font style="color:rgb(37, 43, 72);">经纬度转换平面地图像素坐标</font><font style="color:rgb(71, 101, 130) !important;">map.lnglatToPixel</font>
```javascript
//在 html 的 #container 容器元素中创建地图
var map = new AMap.Map('container', {
  zoom: 4,
});

var longitude = 116.4;
var latitude = 39.9;

//数组格式传入，第二个参数指定缩放等级
var pixel1 = map.lnglatToPixel([longitude, latitude], 3); //返回 Pixel 对象

//构造成 LngLat 对象后传入，第二个参数指定缩放等级
var pixel2 = map.lnglatToPixel(new AMap.LngLat(longitude, latitude), 3); //返回 Pixel 对象
```

#### <font style="color:rgb(37, 43, 72);">平面地图像素坐标转换经纬度</font><font style="color:rgb(71, 101, 130) !important;">map.pixelToLngLat</font>
```javascript
//在 html 的 #container 容器元素中创建地图
var map = new AMap.Map('container', {
  zoom: 4,
});

var x = 420;
var y = 195;

//构造成 Pixel 对象传入，第二个参数指定缩放等级
var lnglat = map.pixelToLngLat(new AMap.Pixel(x, y), 3); // 返回 LngLat 对象
```

### <font style="color:rgb(37, 43, 72);">其他坐标转高德坐标</font>
| **<font style="color:rgb(37, 43, 72) !important;">名称</font>** | **<font style="color:rgb(37, 43, 72) !important;">说明</font>** |
| :--- | :--- |
| <font style="color:rgb(37, 43, 72) !important;">火星坐标系 - GCJ-02</font> | <font style="color:rgb(37, 43, 72) !important;">中国国内使用的被强制加密后的坐标体系，高德坐标就属于该种坐标体系</font> |
| <font style="color:rgb(37, 43, 72) !important;">地球坐标系 - WGS84</font> | <font style="color:rgb(37, 43, 72) !important;">常见于 GPS 设备，Google 地图等国际标准的坐标体系</font> |
| <font style="color:rgb(37, 43, 72) !important;">百度坐标系 - BD-09</font> | <font style="color:rgb(37, 43, 72) !important;">百度地图所使用的坐标体系，是在火星坐标系的基础上又进行了一次加密处理</font> |


```javascript
var gps = [116.3, 39.9]; //需要转换的gps类型的坐标
//参数说明：需要转换的坐标，需要转换的坐标类型，转换成功后的回调函数
AMap.convertFrom(gps, "gps", function (status, result) {
  //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
  //查询成功时，result.locations 即为转换后的高德坐标系
  if (status === "complete" && result.info === "ok") {
    var lnglats = result.locations; //转换后的高德坐标 Array.<LngLat>
    console.log(lnglats);
  }
});
```

> 参考  [https://lbs.amap.com/api/jsapi-v2/documentation#convertfrom](https://lbs.amap.com/api/jsapi-v2/documentation#convertfrom)
>

# <font style="color:rgb(37, 43, 72);">几何计算</font>
## <font style="color:rgb(37, 43, 72);">距离、长度、面积</font>
<font style="color:rgb(37, 43, 72);">JS API 提供了空间数据计算的函数库</font><font style="color:rgb(71, 101, 130) !important;">AMap.GeometryUtil</font><font style="color:rgb(37, 43, 72);">，可以帮助计算点线面的距离、长度、面积等。</font>

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#geometryutil](https://lbs.amap.com/api/jsapi-v2/documentation#geometryutil)
>

| <font style="color:rgb(37, 43, 72) !important;">计算</font>**<font style="color:rgb(37, 43, 72) !important;">两点间</font>**<font style="color:rgb(37, 43, 72) !important;">的实际距离</font> | <font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">AMap.GeometryUtil.distance</font> |
| :--- | :--- |
| <font style="color:rgb(37, 43, 72) !important;">计算</font>**<font style="color:rgb(37, 43, 72) !important;">点到线段</font>**<font style="color:rgb(37, 43, 72) !important;">的最短距离</font> | <font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">AMap.GeometryUtil.distanceToSegment</font> |
| <font style="color:rgb(37, 43, 72) !important;">计算</font>**<font style="color:rgb(37, 43, 72) !important;">点到路径</font>**<font style="color:rgb(37, 43, 72) !important;">的最短距离</font> | <font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">AMap.GeometryUtil.distanceToLine</font> |
| <font style="color:rgb(37, 43, 72) !important;">计算路径的</font>**<font style="color:rgb(37, 43, 72) !important;">实际长度</font>** | <font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">AMap.GeometryUtil.distanceOfLine</font> |
| <font style="color:rgb(37, 43, 72) !important;">计算封闭</font>**<font style="color:rgb(37, 43, 72) !important;">区域的面积</font>** | <font style="color:rgb(71, 101, 130) !important;background-color:rgb(247, 247, 247);">AMap.GeometryUtil.ringArea</font> |


### **<font style="color:rgb(37, 43, 72);">计算两点间的实际距离</font>**
```javascript
var p1 = [116.434027, 39.941037];
var p2 = [116.461665, 39.941564];
//返回 p1 到 p2 间的地面距离，单位：米
var dis = AMap.GeometryUtil.distance(p1, p2);
```

### **<font style="color:rgb(37, 43, 72);">计算点到线段的最短距离</font>**
```javascript
var p0 = [116.450378, 39.947585];
var p1 = [116.434027, 39.941037];
var p2 = [116.461665, 39.941564];
//返回 p0 到线段 p1-p2 的最短地面距离，单位：米
var dis = AMap.GeometryUtil.distanceToSegment(p0, p1, p2);
```

### **<font style="color:rgb(37, 43, 72);">计算点到路径的最短距离</font>**
```javascript
var p0 = [116.450378, 39.947585];
var p1 = [116.434027, 39.941037];
var p2 = [116.461665, 39.941564];
var p3 = [116.466171, 39.937977];
//返回 p0 到线段 p1-p2-p3 的最短地面距离，单位：米
var dis = AMap.GeometryUtil.distanceToSegment(p0, [p1, p2, p3]);
```

### **<font style="color:rgb(37, 43, 72);">计算路径的实际长度</font>**
```javascript
var p0 = [116.450378, 39.947585];
var p1 = [116.434027, 39.941037];
var p2 = [116.461665, 39.941564];
//返回线段 p0-p1-p2 的实际长度，单位：米
var dis = AMap.GeometryUtil.distanceOfLine([p0, p1, p2]);
```

### **<font style="color:rgb(37, 43, 72);">计算封闭区域的面积</font>**
```javascript
var p0 = [116.450378, 39.947585];
var p1 = [116.434027, 39.941037];
var p2 = [116.461665, 39.941564];
//返回点 p0-p1-p2 围成的闭合区域面积，单位：平方米
var area = AMap.GeometryUtil.ringArea([p0, p1, p2]);
```

## <font style="color:rgb(37, 43, 72);">计算线面关系等</font>
### <font style="color:rgb(37, 43, 72);">判断点是否在面内</font>
```javascript
var p0 = [116.450378, 39.947585];
var p1 = [116.434027, 39.941037];
var p2 = [116.461665, 39.941564];
var p3 = [116.466171, 39.937977];
//判断 p0 是否在 p1-p2-p3 围成的封闭区域内
var inRing = AMap.GeometryUtil.isPointInRing(p0, [p1, p2, p3]);
```

### <font style="color:rgb(37, 43, 72);">判断点是否在线段上</font>
```javascript
var p0 = [116.450378, 39.947585];
var p1 = [116.434027, 39.941037];
var p2 = [116.461665, 39.941564];
var p3 = [116.466171, 39.937977];
//判断 p0 是否在 p1-p2 组成的线段上，最后一个参数为 100米 的误差
var inLine = AMap.GeometryUtil.isPointOnSegment(p0, p1, p2, 100);
```

### <font style="color:rgb(37, 43, 72);">计算两个面的交叉区域</font>
```javascript
var p0 = [116.446108, 39.94753];
var p1 = [116.433577, 39.941081];
var p2 = [116.4616, 39.941476];
var p3 = [116.45404, 39.947472]; 
//计算面 p0-p1-p2 和面 p3-p1-p2 交叉的区域。返回交叉区域路径，如果没有交叉则路径为空。
var range = AMap.GeometryUtil.ringRingClip([p0, p1, p2], [p3, p1, p2]);
```

# <font style="color:rgb(37, 43, 72);">辅助库</font>
## <font style="color:rgb(37, 43, 72);">浏览器辅助函数</font>
```javascript
//浏览器 UA 信息
var ua = AMap.Browser.ua;
//浏览器平台类型
var plat = AMap.Browser.plat;
//浏览器是否支持 Canvas
var canvas = AMap.Browser.isCanvas;
//浏览器是否支持 WebGL
var isWebGL = AMap.Browser.isWebGL;

```

## <font style="color:rgb(37, 43, 72);">其他辅助函数</font>
### <font style="color:rgb(60, 61, 63);">AMap.Util</font>
<font style="color:rgb(60, 61, 63);">AMap.Util 是</font><font style="color:rgb(37, 43, 72);">常用库函数集合，包含颜色格式转换、数组操作、requestAnimationFrame 动画函数调用等。</font>

```javascript
var colorStr = 'red';
var colorHex = 'ff0000'; //#RRGGBB
var colorRGBAHex = 'ffff0000'; //#AARRGGBB
  
var colorOut = AMap.Util.colorNameToHex(colorStr); //将颜色名称转换为16进制颜色代码，结果为 #ff0000  
var colorOut2 = AMap.Util.rgbHex2Rgba(colorHex); //将普通16进制颜色代码转换为带透明度的 RGB 格式，结果为 rgba(255, 0, 0, 1.00);
var colorOut3 = AMap.Util.argbHex2Rgba(colorRGBAHex); //将带透明度的16进制颜色代码转换为带透明度的 RGB 格式，结果为 rgba(255, 0, 0, 1.00)
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#util](https://lbs.amap.com/api/jsapi-v2/documentation#util)
>

### <font style="color:rgb(60, 61, 63);">AMap.DomUtil</font>
<font style="color:rgb(71, 101, 130) !important;">AMap.domUtil</font><font style="color:rgb(37, 43, 72);"> 是操作 DOM 相关的库函数集合。</font>

```javascript
var body = AMap.DomUtil.getViewport(document.body); //获取文档视口信息  
var width = body.width; //获取视口的宽度  
var height = body.height; //获取视口的高度  
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#DomUtil](https://lbs.amap.com/api/jsapi-v2/documentation#DomUtil)
>



# <font style="color:rgb(37, 43, 72);">服务插件和工具</font>
## <font style="color:rgb(37, 43, 72);">路线规划</font>
<font style="color:rgb(37, 43, 72);background-color:rgb(253, 253, 254);">路线规划的方式有多种，包括驾车、公交、步行、骑乘和货车等。每种路线规划方式都有相对应的插件。</font>

下面以AMap.Driving为例



### <font style="color:rgb(60, 61, 63);">获取驾车路线规划数据</font>
#### <font style="color:rgb(37, 43, 72);">使用关键字获取驾车规划数据</font>
```javascript
AMap.plugin("AMap.Driving", function () {
  var driving = new AMap.Driving({
    policy: 0, //驾车路线规划策略，0是速度优先的策略
  });
  var points = [
    { keyword: "北京市地震局（公交站）", city: "北京" },
    { keyword: "亦庄文化园（地铁站）", city: "北京" },
  ];
  driving.search(points, function (status, result) {
    //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
    //查询成功时，result 即为对应的驾车导航信息
  });
});
```

#### <font style="color:rgb(37, 43, 72);">使用经纬度获取驾车规划数据</font>
```javascript
AMap.plugin("AMap.Driving", function () {
  var driving = new AMap.Driving({
    policy: 0, //驾车路线规划策略，0是速度优先的策略
  });
  var startLngLat = [116.379028, 39.865042]; //起始点坐标
  var endLngLat = [116.427281, 39.903719]; //终点坐标
  driving.search(startLngLat, endLngLat, function (status, result) {
    //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
    //查询成功时，result 即为对应的驾车导航信息
  });
});
```

#### <font style="color:rgb(37, 43, 72);">添加途经点参数</font>
##### **<font style="color:rgb(37, 43, 72);">使用关键字方式添加途径点</font>**
```javascript
AMap.plugin("AMap.Driving", function () {
  var driving = new AMap.Driving({
    policy: 0, //驾车路线规划策略，0是速度优先的策略
  });
  var points = [
    { keyword: "北京市地震局（公交站）", city: "北京" }, //起始点
    { keyword: "北京站", city: "北京" }, //设置途经点参数，最多支持传入16个途经点
    { keyword: "亦庄文化园（地铁站）", city: "北京" }, //终点
  ];
  driving.search(points, function (status, result) {
    //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
    //查询成功时，result 即为对应的驾车导航信息
  });
});
```

##### <font style="color:rgb(37, 43, 72);">使用经纬度方式添加途径点</font>
```javascript
AMap.plugin("AMap.Driving", function () {
  var driving = new AMap.Driving({
    policy: 0, //驾车路线规划策略，0是速度优先的策略
  });
  var startLngLat = [116.379028, 39.865042]; //起始点坐标
  var endLngLat = [116.427281, 39.903719]; //终点坐标
  var opts = {
    waypoints: [{ keyword: "北京站", city: "北京" }], //途经点参数，最多支持传入16个途经点
  };
  var opts = {
  //途经点参数，最多支持传入16个途经点
  waypoints: [[116.397455,39.909187]],
};
  driving.search(startLngLat, endLngLat, opts, function (status, result) {
    //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
    //查询成功时，result 即为对应的驾车导航信息
  });
});
```

### <font style="color:rgb(37, 43, 72);">使用默认 UI 显示驾车路线规划</font>
```javascript
AMap.plugin("AMap.Driving", function () {
  var driving = new AMap.Driving({
    //驾车路线规划策略，0是速度优先的策略
    policy: 0, 
    //map 指定将路线规划方案绘制到对应的 AMap.Map 对象上
    map: map,
    //panel 指定将结构化的路线详情数据显示的对应的 DOM 上，传入值需是 DOM 的 ID
    panel: "my-panel",
  });
  var points = [
    { keyword: "北京市地震局（公交站）", city: "北京" },
    { keyword: "亦庄文化园（地铁站）", city: "北京" },
  ];
  //搜索完成后，将自动绘制路线到地图上
  driving.search(points);
});
```

> 驾车策略 [https://lbs.amap.com/api/webservice/guide/api/direction#driving](https://lbs.amap.com/api/webservice/guide/api/direction#driving)
>

### <font style="color:rgb(37, 43, 72);">使用驾车规划拖拽插件编辑路线</font>
```javascript
AMap.plugin("AMap.DragRoute", function () {
  //path 是驾车导航的起、途径和终点，最多支持16个途经点
  var path = [];
  path.push([116.303843, 39.983412]);
  path.push([116.321354, 39.896436]);
  path.push([116.407012, 39.992093]);
  var route = new AMap.DragRoute(map, path, 0);
  //查询导航路径并开启拖拽导航
  route.search();
});
```

> 属性方法  [https://lbs.amap.com/api/javascript-api/reference/route-search#AMap.DragRoute](https://lbs.amap.com/api/javascript-api/reference/route-search#AMap.DragRoute)
>

### <font style="color:rgb(37, 43, 72);">其它路线规划插件</font><font style="color:rgb(37, 43, 72);background-color:rgb(253, 253, 254);">介绍</font>
#### <font style="color:rgb(37, 43, 72);">公交路线规划</font><font style="color:rgb(71, 101, 130) !important;">AMap.Transfer</font>
[https://lbs.amap.com/api/javascript-api/reference/route-search#m_AMap.Transfer](https://lbs.amap.com/api/javascript-api/reference/route-search#m_AMap.Transfer)

#### <font style="color:rgb(37, 43, 72);">步行路线规划</font><font style="color:rgb(71, 101, 130) !important;">AMap.Walking</font>
[https://lbs.amap.com/api/javascript-api/reference/route-search#m_AMap.Walking](https://lbs.amap.com/api/javascript-api/reference/route-search#m_AMap.Walking)

#### <font style="color:rgb(37, 43, 72);">骑行路线规划</font><font style="color:rgb(71, 101, 130) !important;">AMap.Riding</font>
[https://lbs.amap.com/api/javascript-api/reference/route-search#AMap.Riding](https://lbs.amap.com/api/javascript-api/reference/route-search#AMap.Riding)

#### <font style="color:rgb(37, 43, 72);">货车路线规划</font><font style="color:rgb(71, 101, 130) !important;">AMap.TruckDriving</font>
[https://lbs.amap.com/api/javascript-api/reference/route-search#truck](https://lbs.amap.com/api/javascript-api/reference/route-search#truck)



## <font style="color:rgb(37, 43, 72);">输入提示与 POI 搜索</font>
> 城市和PIO码 [https://lbs.amap.com/api/webservice/download](https://lbs.amap.com/api/webservice/download)
>

### <font style="color:rgb(37, 43, 72);">输入提示插件</font>
#### <font style="color:rgb(37, 43, 72);">使用输入提示</font>
```javascript
//异步加载 AutoComplete 插件
AMap.plugin("AMap.AutoComplete", function () {
  var autoOptions = {
    //city 限定城市，默认全国
    city: "全国",
  };
  //实例化AutoComplete
  var autoComplete = new AMap.AutoComplete(autoOptions);
  //根据关键字进行搜索 keyword 为搜索的关键词
  autoComplete.search(keyword, function (status, result) {
    //搜索成功时，result 即是对应的匹配数据
    console.log(result);
  });
});
```

#### <font style="color:rgb(37, 43, 72);">使用输入提示插件的默认 UI</font>
```javascript
AMap.plugin("AMap.AutoComplete", function () {
  var autoOptions = {
    input: "input_id", //"input_id"替换为输入框实际 id 
  };
  var autoComplete = new AMap.AutoComplete(autoOptions);
  //无需再手动执行 search 方法，autoComplete 会根据传 input 对应的 DOM 动态触发 search
});
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#autocomplete](https://lbs.amap.com/api/javascript-api-v2/documentation#autocomplete)
>

### <font style="color:rgb(37, 43, 72);">POI 搜索插件</font>
#### <font style="color:rgb(37, 43, 72);">根据关键字查询 POI 详细信息</font>
```javascript
//异步加载 PlaceSearch 插件
AMap.plugin("AMap.PlaceSearch", function () {
  var placeSearch = new AMap.PlaceSearch({
    //city 指定搜索所在城市，支持传入格式有：城市名、citycode 和 adcode
    city: "010",
  });
  placeSearch.search("北京大学", function (status, result) {
    //查询成功时，result 即对应匹配的 POI 信息
    console.log(result);
  });
});
```

#### <font style="color:rgb(37, 43, 72);">根据中心点经纬度和半径进行关键词周边搜索</font>
```javascript
AMap.plugin("AMap.PlaceSearch", function () {
  var placeSearch = new AMap.PlaceSearch({
    //city 指定搜索所在城市，支持传入格式有：城市名、citycode 和 adcode
    city: "010",
  });
  var cpoint = [116.461841,39.909104]; //中心点坐标
  placeSearch.searchNearBy("咖啡厅", cpoint, 200, function (status, result) {
    //查询成功时，result 即对应匹配的 POI 信息
    console.log(result);
  });
});
```

#### <font style="color:rgb(37, 43, 72);">根据范围进行关键词搜索</font>
```javascript
AMap.plugin("AMap.PlaceSearch", function () {
  var placeSearch = new AMap.PlaceSearch({
    //city 指定搜索所在城市，支持传入格式有：城市名、citycode 和 adcode
    city: "010",
  });
  //多边形范围坐标数组
  var polygonArr = [
    [116.403322, 39.920255],
    [116.410703, 39.897555],
    [116.402292, 39.892353],
    [116.389846, 39.891365],
  ];
  placeSearch.searchInBounds("酒店", polygonArr, function (status, result) {
    //查询成功时，result 即对应匹配的 POI 信息
    console.log(result);
  });
});
```

#### <font style="color:rgb(37, 43, 72);">根据 POI ID 查询 POI 详细信息</font>
```javascript
AMap.plugin("AMap.PlaceSearch", function () {
  var placeSearch = new AMap.PlaceSearch();
  //中国国家博物馆对应的 POI ID
  var poiid = "B000A83U0P";
  placeSearch.getDetails(poiid, function (status, result) {
  //查询成功时，result 即为对应的 POI 详情
  });
});
```

### <font style="color:rgb(37, 43, 72);">输入提示和 POI 搜索插件结合使用</font>
```javascript
AMap.plugin(["AMap.AutoComplete", "AMap.PlaceSearch"], function () {
  var autoOptions = {
    //城市，默认全国
    city: "北京",
    //使用联想输入的 input 的 id
    input: "input",
  };
  var autocomplete = new AMap.AutoComplete(autoOptions);
  var placeSearch = new AMap.PlaceSearch({
    city: "北京",
    map: map,
  });
  autocomplete.on("select", function (e) {
    //针对选中的poi实现自己的功能
    placeSearch.search(e.poi.name);
  });
});
```

## <font style="color:rgb(37, 43, 72);">轨迹纠偏</font>
### **<font style="color:rgb(37, 43, 72);">调用轨迹纠偏服务</font>**
```javascript
 var originPath= [
   {"x":116.478928,"y":39.997761,"sp":19,"ag":0, "tm":1478031031},
   {"x":116.478907,"y":39.998422,"sp":10,"ag":0, "tm":2},
   {"x":116.479384,"y":39.998546,"sp":10,"ag":110,"tm":3},
   {"x":116.481053,"y":39.998204,"sp":10,"ag":120,"tm":4},
   {"x":116.481793,"y":39.997868,"sp":10,"ag":120,"tm":5},
   {"x":116.482898,"y":39.998217,"sp":10,"ag":30, "tm":6},
   {"x":116.483789,"y":39.999063,"sp":10,"ag":30, "tm":7},
   {"x":116.484674,"y":39.999844,"sp":10,"ag":30, "tm":8}
 ]

AMap.plugin('AMap.GraspRoad',function(){
  var grasp = new AMap.GraspRoad();
  grasp.driving(originPath,function(error,result){
          if(!error){
            var newPath = result.data.points; //纠偏后的轨迹
            var distance = result.data.distance; //里程
          }
   })
})
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#grasproad](https://lbs.amap.com/api/javascript-api-v2/documentation#grasproad)
>

## <font style="color:rgb(37, 43, 72);">行政区查询</font>
#### <font style="color:rgb(37, 43, 72);">行政区查询服务</font>
```javascript
AMap.plugin("AMap.DistrictSearch", function () {
  var districtSearch = new AMap.DistrictSearch({
    level: "country", //关键字对应的行政区级别，country 表示国家
    subdistrict: 1, //显示下级行政区级数，1表示返回下一级行政区
    extensions: 'all', //返回行政区边界坐标组等具体信息
  });
  //搜索所有省、直辖市信息
  districtSearch.search("中国", function (status, result) {
    console.log(status, result);
    //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
    //查询成功时，result 即为对应的行政区信息
  });
});
```

#### <font style="color:rgb(37, 43, 72);">绘制行政区划边界</font>
```javascript
AMap.plugin("AMap.DistrictSearch", function () {
  var district = new AMap.DistrictSearch({
    extensions: "all", //返回行政区边界坐标等具体信息
    level: "district", //设置查询行政区级别为区
  });
  district.search("朝阳区", function (status, result) {
    var bounds = result.districtList[0].boundaries; //获取朝阳区的边界信息
    if (bounds) {
      for (var i = 0; i < bounds.length; i++) {
        //生成行政区划 polygon
        var polygon = new AMap.Polygon({
          map: map, //显示该覆盖物的地图对象
          strokeWeight: 1, //轮廓线宽度
          path: bounds[i], //多边形轮廓线的节点坐标数组
          fillOpacity: 0.7, //多边形填充透明度
          fillColor: "#CCF3FF", //多边形填充颜色
          strokeColor: "#CC66CC", //线条颜色
        });
      }
      map.setFitView(); //将覆盖物调整到合适视野
    }
  });
});
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#districtsearch](https://lbs.amap.com/api/javascript-api-v2/documentation#districtsearch)
>

## <font style="color:rgb(37, 43, 72);">地理编码与逆地理编码</font>
<font style="color:rgb(0, 0, 0);">可以调用地理编码/逆地理编码接口，</font><font style="color:rgb(37, 43, 72);"> 实现</font>**<font style="color:rgb(37, 43, 72);">地址描述信息</font>**<font style="color:rgb(37, 43, 72);"> 与 </font>**<font style="color:rgb(37, 43, 72);">地理坐标（经纬度）</font>**<font style="color:rgb(37, 43, 72);">之间的转化。同时，结合地图样式及交互，实现业务需求。</font>

+ <font style="color:rgb(37, 43, 72) !important;">正向地理编码： 将 </font>**<font style="color:rgb(37, 43, 72) !important;">地址描述信息 </font>**<font style="color:rgb(37, 43, 72) !important;">转换成 </font>**<font style="color:rgb(37, 43, 72) !important;">地理坐标（经纬度）</font>**<font style="color:rgb(37, 43, 72) !important;">，对应为</font><font style="color:rgb(71, 101, 130) !important;">AMap.Geocoder</font><font style="color:rgb(37, 43, 72) !important;">的</font><font style="color:rgb(71, 101, 130) !important;">getLocation</font><font style="color:rgb(37, 43, 72) !important;">方法</font>
+ <font style="color:rgb(37, 43, 72) !important;">逆向地理编码：将 </font>**<font style="color:rgb(37, 43, 72) !important;">地理坐标（经纬度） </font>**<font style="color:rgb(37, 43, 72) !important;">转换成 </font>**<font style="color:rgb(37, 43, 72) !important;">地址描述信息</font>**<font style="color:rgb(37, 43, 72) !important;">，对应为</font><font style="color:rgb(71, 101, 130) !important;">AMap.Geocoder</font><font style="color:rgb(37, 43, 72) !important;">的</font><font style="color:rgb(71, 101, 130) !important;">getAddress</font><font style="color:rgb(37, 43, 72) !important;">方法</font>

```javascript
AMap.plugin('AMap.Geocoder', function() {
  var geocoder = new AMap.Geocoder({
    city: '全国' // city 指定进行编码查询的城市，支持传入城市名、adcode 和 citycode
  })

  // 使用geocoder做地理/逆地理编码
})
```



> 属性方法 [https://lbs.amap.com/api/javascript-api/reference/lnglat-to-address#m_AMap.Geocoder](https://lbs.amap.com/api/javascript-api/reference/lnglat-to-address#m_AMap.Geocoder)
>

### **<font style="color:rgb(37, 43, 72);">正向地理编码方法</font>**
```javascript
AMap.plugin('AMap.Geocoder', function() {
  var geocoder = new AMap.Geocoder({
    city: '010' // city 指定进行编码查询的城市，支持传入城市名、adcode 和 citycode
  })
  //单个传入
  var address = '北京市海淀区苏州街';
  //批量传入
  var addresses = ['朝阳区阜荣街10号', '朝阳区广顺南大街13号', '朝阳区阜通西大街17号'];

  geocoder.getLocation(address, function(status, result) {
    if (status === 'complete' && result.info === 'OK') {
      // result中对应详细地理坐标信息
    }
  })
})

```

### **<font style="color:rgb(37, 43, 72);">逆向地理编码方法</font>**


```javascript
AMap.plugin('AMap.Geocoder', function() {
  var geocoder = new AMap.Geocoder({
    city: '010' // city 指定进行编码查询的城市，支持传入城市名、adcode 和 citycode
  })
  //单个传入
  var lnglat = [116.396574, 39.992706]
  //多个传入
  var lnglats = [
    new AMap.LngLat(116.451662,39.944899), 
    new AMap.LngLat(116.444569,39.93927), 
    new AMap.LngLat(116.442932,39.933147)
  ];
  // 也可简写成 var lnglats = [[116.451662,39.944899], [116.444569,39.93927], [116.442932,39.933147]]
  
  geocoder.getAddress(lnglats, function(status, result) {
    if (status === 'complete' && result.info === 'OK') {
      // result为对应的地理位置详细信息
      // result.regeocodes为批量逆地址地理编码数据
    }
  })
})
```

## <font style="color:rgb(37, 43, 72);">站点查询与公交线路</font>
### <font style="color:rgb(60, 61, 63);">公交站点查询</font>
#### <font style="color:rgb(37, 43, 72);">获取公交站点信息</font>
```javascript
AMap.plugin(["AMap.StationSearch"], function () {
  //实例化公交站点查询插件
  var station = new AMap.StationSearch({
    pageIndex: 1, //页码，默认值为1
    pageSize: 20, //单页显示结果条数，默认值为20，最大值为50
    city: "010", //限定查询城市，可以是城市名（中文/中文全拼）、城市编码
  });
  //执行关键字查询
  station.search("东直门", function (status, result) {
    //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
    //查询成功时，result.stationInfo 即为公交站点详细信息
  });
});
```

> 属性方法 [https://lbs.amap.com/api/javascript-api/reference/search/#m_AMap.StationSearch](https://lbs.amap.com/api/javascript-api/reference/search/#m_AMap.StationSearch)
>

#### <font style="color:rgb(37, 43, 72);">绘制公交站点标记</font>
```javascript
AMap.plugin(["AMap.StationSearch"], function () {
  //实例化公交站点查询插件
  var station = new AMap.StationSearch({
    city: "010", //限定查询城市，可以是城市名（中文/中文全拼）、城市编码
  });
  //执行关键字查询
  station.search("东直门", function (status, result) {
    //status：complete 表示查询成功，no_data 为查询无结果，error 代表查询错误
    if (status === "complete" && result.info === "OK") {
      var stationArr = result.stationInfo; //查询成功时，result.stationInfo 即为公交站点详细信息
      for (var i = 0; i < stationArr.length; i++) {
        //绘制点标记 Marker
        var marker = new AMap.Marker({
          //点标记中显示的图标
          icon: new AMap.Icon({
            image: "//a.amap.com/jsapi_demos/static/resource/img/pin.png",
            size: new AMap.Size(32, 32),
            imageSize: new AMap.Size(32, 32),
          }),
          offset: new AMap.Pixel(-16, -32), //点标记显示位置偏移量
          position: stationArr[i].location, //点标记在地图上显示的位置
          map: map, //显示该覆盖物的地图对象
        });
        //构造 marker 的信息窗体
        marker.info = new AMap.InfoWindow({
          content: stationArr[i].name, //信息窗体的显示内容
          offset: new AMap.Pixel(0, -30),
        });
        //鼠标悬停时显示该 marker 的信息窗体
        marker.on("mouseover", function (e) {
          e.target.info.open(map, e.target.getPosition());
        });
      }
    }
    //将覆盖物调整到合适视野
    map.setFitView();
  });
});
```

### <font style="color:rgb(37, 43, 72);">公交路线查询（待完善）</font>
## <font style="color:rgb(37, 43, 72);">定位</font>
### <font style="color:rgb(60, 61, 63);">地图初始化加载定位到当前城市</font>
```javascript
var map = new AMap.Map('container', {
  zoom: 10
  //不传入center参数 默认定位到当前城市
})
```

### <font style="color:rgb(37, 43, 72);">浏览器定位</font>
<font style="color:rgb(37, 43, 72);">地图初始化加载的定位只能获取到城市级别信息，如果想获取到具体的位置就要借助浏览器定位。</font>

```javascript
AMap.plugin('AMap.Geolocation', function() {
  var geolocation = new AMap.Geolocation({
    enableHighAccuracy: true, // 是否使用高精度定位，默认：true
    timeout: 10000, // 设置定位超时时间，默认：无穷大
    offset: [10, 20],  // 定位按钮的停靠位置的偏移量
    zoomToAccuracy: true,  //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
    position: 'RB' //  定位按钮的排放位置,  RB表示右下
  })

  geolocation.getCurrentPosition(function(status,result){
        if(status=='complete'){
            onComplete(result)
        }else{
            onError(result)
        }
  });

  function onComplete (data) {
    // data是具体的定位信息
  }

  function onError (data) {
    // 定位出错
  }
})
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#geolocation](https://lbs.amap.com/api/javascript-api-v2/documentation#geolocation)
>

### <font style="color:rgb(60, 61, 63);">IP定位获取当前城市信息</font>
```javascript
AMap.plugin('AMap.CitySearch', function () {
  var citySearch = new AMap.CitySearch()
  citySearch.getLocalCity(function (status, result) {
    if (status === 'complete' && result.info === 'OK') {
      // 查询成功，result即为当前所在城市信息
    }
  })
})
```

> 属性方法 [https://lbs.amap.com/api/jsapi-v2/documentation#citysearch](https://lbs.amap.com/api/jsapi-v2/documentation#citysearch)
>

## <font style="color:rgb(37, 43, 72);">天气</font>
### <font style="color:rgb(37, 43, 72);">实时天气查询</font>
```javascript
//加载天气查询插件
AMap.plugin("AMap.Weather", function () {
  //创建天气查询实例
  var weather = new AMap.Weather();
  //执行实时天气信息查询
  weather.getLive("杭州市", function (err, data) {
    console.log(err, data);
    //err 正确时返回 null
    //data 返回实时天气数据，返回数据见下表
  });
});
```

### <font style="color:rgb(37, 43, 72);">天气预报查询</font>
```javascript
//加载天气查询插件
AMap.plugin("AMap.Weather", function () {
  //创建天气查询实例
  var weather = new AMap.Weather();
  //执行实时天气信息查询
  weather.getForecast("北京市", function (err, data) {
    console.log(err, data);
    //err 正确时返回 null
    //data 返回天气预报数据，返回数据见下表
  });
});
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#weather](https://lbs.amap.com/api/javascript-api-v2/documentation#weather)
>



## **<font style="color:rgb(37, 43, 72);">绘制矢量图形示例</font>**
```javascript
//异步加载插件
AMap.plugin("AMap.MouseTool", function () {
  var mouseTool = new AMap.MouseTool(map); //创建鼠标工具插件实例
});

//在插件的回调函数中使用功能
mouseTool.on("draw", function (event) {
  //event.obj 为绘制出来的覆盖物对象
  console.log("覆盖物对象绘制完成");
});
```

### **<font style="color:rgb(37, 43, 72);">创建 </font>**<font style="color:rgb(60, 61, 63);">MouseTool </font>**<font style="color:rgb(37, 43, 72);">实例</font>**
```javascript
//异步加载插件
AMap.plugin("AMap.MouseTool", function () {
  var mouseTool = new AMap.MouseTool(map); //创建鼠标工具插件实例
});
```

### **<font style="color:rgb(37, 43, 72);">给 </font>**<font style="color:rgb(60, 61, 63);">MouseTool 绑定</font>**<font style="color:rgb(37, 43, 72);">事件</font>**
```javascript
//在插件的回调函数中使用功能
mouseTool.on("draw", function (event) {
  //event.obj 为绘制出来的覆盖物对象
  console.log("覆盖物对象绘制完成");
});
```

### **<font style="color:rgb(37, 43, 72);">绘制矢量图形</font>**
+ <font style="color:rgb(37, 43, 72) !important;">绘制线</font>

```javascript
//在插件的回调函数中使用功能
mouseTool.polyline({
  strokeColor: "#3366FF", //轮廓线颜色
  strokeOpacity: 1, //轮廓线透明度
  strokeWeight: 6, //轮廓线宽度
  strokeStyle: "solid", //线样式还支持 'dashed'
  //strokeDasharray: [10, 5], //strokeDasharray 属性在 strokeStyle 是 dashed 时有效
})
```

+ <font style="color:rgb(37, 43, 72) !important;">绘制多边形</font>

```javascript
//在插件的回调函数中使用功能
mouseTool.polygon({
  strokeColor: "#FF33FF", //轮廓线颜色
  strokeOpacity: 1, //轮廓线透明度
  strokeWeight: 6, //轮廓线宽度
  strokeOpacity: 0.2, //轮廓线透明度
  fillColor: '#1791fc', //多边形填充颜色
  fillOpacity: 0.4, //多边形填充透明度
  strokeStyle: "solid", //线样式还支持 'dashed'
  //strokeDasharray: [30,10], //strokeDasharray 属性在 strokeStyle 是 dashed 时有效
})
```

+ <font style="color:rgb(37, 43, 72) !important;">绘制矩形</font>

```javascript
//在插件的回调函数中使用功能
mouseTool.rectangle({
  strokeColor:'red', //轮廓线颜色
  strokeOpacity:0.5, //轮廓线透明度
  strokeWeight: 6, //轮廓线宽度
  fillColor:'blue', //多边形填充颜色
  fillOpacity:0.5, //多边形填充透明度
  strokeStyle: 'solid', //线样式还支持 'dashed'
  //strokeDasharray: [30,10], //strokeDasharray 属性在 strokeStyle 是 dashed 时有效
})
```

+ <font style="color:rgb(37, 43, 72) !important;">绘制圆形</font>

```javascript
//在插件的回调函数中使用功能
mouseTool.circle({
  strokeColor: "#FF33FF", //轮廓线颜色
  strokeOpacity: 1, //轮廓线透明度
  strokeWeight: 6, //轮廓线宽度
  strokeOpacity: 0.2, //轮廓线透明度
  fillColor: '#1791fc', //多边形填充颜色
  fillOpacity: 0.4, //多边形填充透明度
  strokeStyle: 'solid', //线样式还支持 'dashed'
  //strokeDasharray: [30,10], //strokeDasharray 属性在 strokeStyle 是 dashed 时有效
})
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/guide/services/mouse-tool#s2](https://lbs.amap.com/api/javascript-api-v2/guide/services/mouse-tool#s2)
>

## <font style="color:rgb(37, 43, 72);">拉框缩放 AMap.MouseTool</font>
### **<font style="color:rgb(37, 43, 72);">创建 </font>**<font style="color:rgb(60, 61, 63);">MouseTool </font>**<font style="color:rgb(37, 43, 72);">实例</font>**
```javascript
AMap.plugin("AMap.MouseTool", function () {
  var mouseTool = new AMap.MouseTool(map); //创建鼠标工具插件实例
});
```

### **<font style="color:rgb(37, 43, 72);">放大</font>**
```javascript
//在回调函数中使用插件功能
mouseTool.rectZoomIn({
  strokeColor: "#80d8ff",
  fillColor: "#80d8ff",
  fillOpacity: 0.3,
  //同 Polygon 的 Option 设置
});
```

### **<font style="color:rgb(37, 43, 72);">缩小</font>**
```javascript
//在回调函数中使用插件功能
mouseTool.rectZoomOut({
  strokeColor: "#80d8ff",
  fillColor: "#80d8ff",
  fillOpacity: 0.3,
  //同 Polygon 的 Option 设置
});
```

### **<font style="color:rgb(37, 43, 72);">关闭拉框缩放</font>**
```javascript
//在回调函数中使用插件功能
mouseTool.close();
```

> 属性方法 [https://lbs.amap.com/api/javascript-api-v2/documentation#mousetool](https://lbs.amap.com/api/javascript-api-v2/documentation#mousetool)
>

## <font style="color:rgb(37, 43, 72);">距离面积测量 AMap.MouseTool</font>
### **<font style="color:rgb(37, 43, 72);">创建 </font>**<font style="color:rgb(60, 61, 63);">MouseTool </font>**<font style="color:rgb(37, 43, 72);">实例</font>**
```javascript
//异步加载插件
AMap.plugin("AMap.MouseTool", function () {
  var mouseTool = new AMap.MouseTool(map); //创建鼠标工具插件实例
});
```

### **<font style="color:rgb(37, 43, 72);">测量距离</font>**
```javascript
//在插件的回调函数中使用功能
mouseTool.rule({
  startMarkerOptions: { //设置量测起始点标记属性对象 可缺省   
    icon: new AMap.Icon({
      size: new AMap.Size(19, 31), //图标大小
      imageSize: new AMap.Size(19, 31), 
      image: "//webapi.amap.com/theme/v1.3/markers/b/start.png",
    }),
    offset: new AMap.Pixel(-9, -31),
  },
  endMarkerOptions: { //设置量测结束点标记属性对象 可缺省  
    icon: new AMap.Icon({
      size: new AMap.Size(19, 31), //图标大小
      imageSize: new AMap.Size(19, 31),
      image: "//webapi.amap.com/theme/v1.3/markers/b/end.png",
    }),
    offset: new AMap.Pixel(-9, -31),
  },
  midMarkerOptions: { //设置拖拽路线插件途经点点标记属性对象 可缺省
    icon: new AMap.Icon({
      size: new AMap.Size(19, 31), //图标大小
      imageSize: new AMap.Size(19, 31),
      image: "//webapi.amap.com/theme/v1.3/markers/b/mid.png",
    }),
    offset: new AMap.Pixel(-9, -31),
  },
  lineOptions: { //可缺省
    strokeStyle: "solid",
    strokeColor: "#FF33FF",
    strokeOpacity: 1,
    strokeWeight: 2,
  },
});
```

### **<font style="color:rgb(37, 43, 72);">测量面积</font>**
```javascript
//在插件的回调函数中使用功能
mouseTool.measureArea({
   strokeColor:'#80d8ff',
   fillColor:'#80d8ff',
   fillOpacity:0.3
   //同 Polygon 的 Option 设置
 });
```

### **<font style="color:rgb(37, 43, 72);">关闭</font>**<font style="color:rgb(37, 43, 72);">鼠标工具</font>
```javascript
//在回调函数中使用插件功能
mouseTool.close();
```

